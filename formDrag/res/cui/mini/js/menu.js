/*! cui 2016-11-08 */
$.component("coral.basemenu",{castProperties:["data"],options:{responsive:!1,minmenu:!1,onLoad:null,singleOpen:!1,collapseButton:!1,collapseIcon:"cui-icon-arrow-left3",expandIcon:"cui-icon-arrow-right3",simpleDataIdKey:"id",firstIsactive:!1,isactiveField:"isactive",nameField:"name",simpleDataPIdKey:"pId",vertical:!1,autoDisplay:!0,popup:!1,trigger:null,my:"left top",at:"left bottom",simpleDataEnable:!1,of:null,triggerEvent:"click",data:null,onClick:null,onCreate:null,url:null,method:"post"},_create:function(){this.options.popup&&this._initPopup()},reload:function(a,b){var c=!1,d=[],e=this,f={};if(a||e.options.url?!a&&e.options.url&&(a=e.options.url):a=[],"string"!=typeof a?(f=a,f.data?d=f.data:f.url?(a=f.url,e.options.url=f.url,c=!0):f instanceof Array?d=a:f.url||f.data||e.options.url?f.url||f.data||!e.options.url||(a=e.options.url,c=!0):d=[]):(e.options.url=a,c=!0),c){var g="";$.ajax({type:this.options.method,url:e.options.url,async:!1,data:null,dataType:"json",success:function(a){var b="";b=e._generateHTML(b,a),b.length>7&&(b=b.substring(4),b=b.substring(0,b.length-5)),e.element.empty(),e.element.html(b),e._trigger($.isFunction(f.onLoad)?f.onLoad:"onLoad",null,[a])}})}else{var g="";g=e._generateHTML(g,d),g.length>7&&(g=g.substring(4),g=g.substring(0,g.length-5)),e.element.empty(),e.element.html(g),e._trigger($.isFunction(f.onLoad)?f.onLoad:"onLoad",null,[d])}e._render()},_generateULContent:function(){var a=this;if(0==this.element.children().length&&null!=this.options.data){var b="",c=this.options.data;b=this._generateHTML(b,c),b.length>7&&(b=b.substring(4),b=b.substring(0,b.length-5)),this.element.html(b)}else if(0==this.element.children().length&&null!=this.options.url){var b="";$.ajax({type:this.options.method,url:a.options.url,async:!1,data:null,dataType:"json",success:function(b){var c="";c=a._generateHTML(c,b),c.length>7&&(c=c.substring(4),c=c.substring(0,c.length-5)),a.element.html(c)},error:function(){}})}},_transformToSimpleData:function(a,b){if(!b)return[];var c,d,e=[],f=[],g=this.options.simpleDataIdKey,h=this.options.simpleDataPIdKey;for(c=0,d=b.length;d>c;c++)f[b[c][g]]=b[c];for(c=0,d=b.length;d>c;c++)f[b[c][h]]&&b[c][g]!=b[c][h]?(f[b[c][h]].items||(f[b[c][h]].items=[]),f[b[c][h]].items.push(b[c])):e.push(b[c]);return e},_transformToGeneralData:function(a,b){},_generateHTML:function(a,b){var c=[],d=this.options,e=d.simpleDataIdKey;c=this.options.simpleDataEnable?this._transformToSimpleData(d,b):b,b=c,a+="<ul>";for(var f=0;f<b.length;f++){a+="<li",""!=b[f][e]&&(a+=' data-id="'+b[f][e]+'" id="menubar-'+b[f][e]+'"'),b[f].path&&(a+=' data-path="'+b[f].path+'"'),a+=">",a+=this._generateANode(b[f]);var g=b[f].items;"undefined"!=typeof g&&g instanceof Array&&g.length>0&&(a=this._generateHTML(a,g)),a+="</li>"}return a+="</ul>"},_generateANode:function(a){var b="<a",c=(this.options.simpleDataIdKey,this.options.isactiveField),d=this.options.nameField;return""!=a.iconclass&&(b+=" data-icon='"+a.iconclass+"'"),""!=a[d]&&(b+=" data-name='"+a[d]+"'"),a.disabled&&(b+=" data-disabled='"+a.disabled+"'"),a.url&&(b+=" data-url='"+a.url+"'"),a.target&&(b+=" data-target='"+a.target+"'"),a[c]&&(b+=" data-isactive='"+a[c]+"'"),b+=">",""!=a[d]&&(b+=a[d]),b+="</a>"},_initPopup:function(){var a=this;this.options.trigger="string"==typeof this.options.trigger?$("#"+this.options.trigger):this.options.trigger,this.element.closest(".coral-menu").addClass("coral-menu-dynamic coral-shadow").appendTo(document.body),this.positionConfig={my:this.options.my,at:this.options.at,of:this.options.of?this.options.of:this.options.trigger},this.options.trigger.on(this.options.triggerEvent+".coral-menu",function(b){if(a.options.disabled!==!0){$(this);a.element.is(":visible")?a.hide():a.show(),b.preventDefault()}}),$(document.body).on("click.coral-menu",function(b){var c=a.element.closest(".coral-menu");if(!c.is(":hidden")){var d=$(b.target);if(!(d.is(a.options.trigger.get(0))||a.options.trigger.has(d).length>0)){var e=c.offset();(b.pageX<e.left||b.pageX>e.left+c.width()||b.pageY<e.top||b.pageY>e.top+c.height())&&a.hide(b)}}}),$(window).on("resize.coral-menu",function(){a.element.closest(".coral-menu").is(":visible")&&a.align()})},show:function(){this.align(),this.element.closest(".coral-menu").css("z-index",++$.coral.zindex).show()},hide:function(){this.element.closest(".coral-menu").fadeOut("fast")},align:function(){this.element.closest(".coral-menu").css({left:"",top:""}).position({my:this.options.my,at:this.options.at,of:this.options.of?this.options.of:this.options.trigger})},_apply:function(a,b,c){return"string"==typeof a?window[a].apply(b,[c]):$.isFunction(a)?a.apply(b,[c]):void 0},_setMenuItemLinkDisabled:function(a){a.data("disabled")===!0?a.toggleClass(this.componentFullName+"-disabled coral-state-disabled",!0).attr("aria-disabled",!0):a.toggleClass(this.componentFullName+"-disabled coral-state-disabled",!1).attr("aria-disabled",!1)},_setMenuItemIsOpen:function(a,b){var c=$(b).data("isopen"),d=this.options.singleOpen,e=this.element.find(".coral-menuitem-open").length;d&&e||!c||(a.addClass("coral-menuitem-open"),a.children("ul").css({display:"block"}))},setMenuItemIsactive:function(a){if("string"==typeof a)a=this.element.find("#menubar-"+a).children(),$(a).parents("li").addClass("coral-menuitem-active"),$(a).parent().parents("li").addClass("coral-menuitem-open "),$(a).parents("ul.coral-menu-child").css({display:"block"});else{var b=$(a).data("isactive");b&&($(a).parents("li").addClass("coral-menuitem-active"),$(a).parent().parents("li").addClass("coral-menuitem-open "),$(a).parents("ul.coral-menu-child").css({display:"block"}))}},_bindMenuItemClick:function(a){a.options.onClick;a.links.on("click",function(){if(a.options.disabled!==!0){var b={};null!=$(this).parent("li").attr("data-id")&&(b.id=$(this).parent("li").attr("data-id")),null!=$(this).attr("data-target")&&(b.target=$(this).attr("data-target")),null!=$(this).attr("data-name")&&(b.name=$(this).attr("data-name")),null!=$(this).attr("data-url")&&(b.url=$(this).attr("data-url")),$(this).find(":checkbox,:radio").length>0?(b.hasChk=!0,b.checked=$(this).find(":checkbox,:radio").prop("checked")):b.hasChk=!1;var c={target:a,currentTarget:a,preventDefault:$.noop};a._trigger("onClick",c,b)}})},setActiveMenu:function(a){var b=this;null!=a&&0!=a.length&&$.each(a,function(){var a=b.element.find("[data-name='"+this+"']");a.parent().addClass("coral-menuitem-current")})},setCurrenMenu:function(a){null!=a&&0!=a.length&&this.element.find(">li>a").each(function(){var b=$(this),c=b.attr("data-name");c===a&&(b.parent().addClass("coral-menuitem-current"),$(this).parent().siblings().removeClass("coral-menuitem-current"))})}}),$.component("coral.navigationmenu",$.coral.basemenu,{castProperties:["title"],options:{collapsible:!0,active:0,textAlign:"left",role:"navigationmenu",menus:"ul",title:null,icons:{activeHeader:"cui-icon-arrow-down",header:"cui-icon-arrow-right2"},header:"> li > :first-child,> :not(li):even"},_activate:function(a){var b=this._findActive(a)[0];b!==this.active[0]&&(b=b||this.active[0],this._eventHandler({target:b,currentTarget:b,preventDefault:$.noop}))},_findActive:function(a){return"number"==typeof a?this.headers.eq(a):$()},_setOption:function(a,b){return"active"===a?void this._activate(b):void this._super(a,b)},_create:function(){var a=this;this._generateULContent(),this._render(),this.links=this.element.find(".coral-menuitem-link:not(.coral-state-disabled)"),this._on({"mousedown .coral-navigationmenu-header":function(a){a.preventDefault()},"click .coral-menuitem-link":function(b){b.preventDefault();var c=$(b.target).closest(".coral-menuitem-link"),d=$(b.target).closest(".coral-menu-parent");if(d.not(".coral-state-disabled").length){d.siblings().find(">ul").attr("aria-expanded",!1).slideUp(),d.find(">.icon").removeClass(a.options.icons.activeHeader).addClass(a.options.icons.header),b.isPropagationStopped()||(this.mouseHandled=!0);var e=d.find(">ul");c.parent().hasClass("coral-menu-parent")?"true"==e.attr("aria-expanded")?e.attr("aria-expanded",!1).slideUp():(e.attr("aria-expanded",!0).slideDown(),d.find(">.icon").removeClass(a.options.icons.header).addClass(a.options.icons.activeHeader)):(this.oldActive=this.active||$(),this.active=c,this.oldActive.removeClass("coral-state-highlight"),ui={item:this.active,target:this.active.attr("href")},this.active.addClass("coral-state-highlight"),this._trigger("onSelect",b,ui))}},"mouseenter .coral-menuitem-link":function(a){a.preventDefault();var b=$(a.target).closest(".coral-menuitem-link"),c=$(a.target).closest(".coral-menu-parent");c.not(".coral-state-disabled").length&&(b.parent().hasClass("coral-menu-parent")||b.addClass("coral-state-hover"),this._updateTitle())},"mouseleave .coral-menuitem-link":function(a){a.preventDefault();var b=$(a.target).closest(".coral-menuitem-link"),c=$(a.target).closest(".coral-menu-parent");c.not(".coral-state-disabled").length&&(b.parent().hasClass("coral-menu-parent")||b.removeClass("coral-state-hover"))}}),this._super()},_updateTitle:function(){this.element.find("li>a").each(function(){var a=$(this),b=a.find(".coral-menuitem-text").text(),c=$("<span style = 'visibility: hidden'>"+b+"</span>").appendTo("body");a.width()<c.width()&&a.attr("title",b),c.remove()})},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("coral-navigationmenu-header coral-state-default")},_render:function(){var a=this;this.element.addClass("coral-helper-reset coral-navigationmenu coral-menu").attr("role","navigationmenu"),this.element.uniqueId(),this.options.id=this.element.attr("id"),this._processPanels(),submenus=this.element.find(this.options.menus),submenus.filter(":not(.coral-menu)").addClass("coral-menu-list coral-helper-reset").attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var a=$(this),b=a.parent();b.attr("aria-haspopup","true"),a.attr("aria-labelledby",b.attr("id"))}),menus=submenus.add(this.element),items=menus.find(this.options.items),items.not(".coral-menu-item").each(function(){var a=$(this);that._isDivider(a)&&a.addClass("coral-component-content coral-menu-divider")}),this.element.find("li").each(function(){var b=$(this),c=b.children("a"),d=(c.data("icon"),"undefined"==typeof b.parent().parent("li").attr("data-level")?0:parseInt(b.parent().parent("li").attr("data-level"))+1);if(c.addClass("coral-menuitem-link coral-state-default coral-corner-all"),c.contents().filter(function(a,b){return!b.tagName}).wrap("<span class='coral-menuitem-text'/>"),c.html('<div class="coral-navigationmenu-item-inner">'+c.html()+"</div>"),b.addClass("coral-menuitem coral-component coral-corner-all").attr("data-level",d).addClass("level"+d),b.children("ul").length>0){var e=b.children("ul");b.addClass("coral-menu-parent"),e.addClass("coral-menu-list coral-helper-reset"),c.prepend('<span class="coral-navigationmenu-item-arrow cui-icon-arrow-down3"></span>')}else"right"==a.options.textAlign;"right"==a.options.textAlign&&$("<span class='coral-empty' style='width:"+16*d+"px;height:16px;'></span>").prependTo(c.find(".coral-navigationmenu-item-inner"))});var b=".coral-navigationmenu li > a[data-target='"+this.options.active+"'], .coral-navigationmenu li > a[href='"+this.options.active+"']",c=$(b);c.parents("ul").show(),c.parent().hasClass("coral-menu-parent")||(c.addClass("coral-state-highlight"),this.oldActive=c,this.active=c)}}),$.component("coral.menu",{version:"4.0.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"coral-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",onBlur:null,onFocus:null,onSelect:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("coral-menu coral-component coral-component-content").toggleClass("coral-menu-icons",!!this.element.find(".coral-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("coral-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .coral-menu-item":function(a){a.preventDefault()},"click .coral-menu-item":function(a){var b=$(a.target);!this.mouseHandled&&b.not(".coral-state-disabled").length&&(this.select(a),a.isPropagationStopped()||(this.mouseHandled=!0),b.has(".coral-menu").length?this.expand(a):!this.element.is(":focus")&&$(this.document[0].activeElement).closest(".coral-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".coral-menu").length&&clearTimeout(this.timer)))},"mouseenter .coral-menu-item":function(a){if(!this.previousFilter){var b=$(a.currentTarget);b.siblings(".coral-state-active").removeClass("coral-state-active"),this.focus(a,b)}},mouseleave:"collapseAll","mouseleave .coral-menu":"collapseAll",focus:function(a,b){var c=this.active||this.element.find(this.options.items).eq(0);b||this.focus(a,c)},blur:function(a){this._delay(function(){$.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(a)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(a){this._closeOnDocumentClick(a)&&this.collapseAll(a),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".coral-menu").addBack().removeClass("coral-menu coral-component coral-component-content coral-menu-icons coral-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".coral-menu-item").removeClass("coral-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("coral-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var a=$(this);a.data("coral-menu-submenu-carat")&&a.remove()}),this.element.find(".coral-menu-divider").removeClass("coral-menu-divider coral-component-content")},_keydown:function(a){var b,c,d,e,f=!0;switch(a.keyCode){case $.coral.keyCode.PAGE_UP:this.previousPage(a);break;case $.coral.keyCode.PAGE_DOWN:this.nextPage(a);break;case $.coral.keyCode.HOME:this._move("first","first",a);break;case $.coral.keyCode.END:this._move("last","last",a);break;case $.coral.keyCode.UP:this.previous(a);break;case $.coral.keyCode.DOWN:this.next(a);break;case $.coral.keyCode.LEFT:this.collapse(a);break;case $.coral.keyCode.RIGHT:this.active&&!this.active.is(".coral-state-disabled")&&this.expand(a);break;case $.coral.keyCode.ENTER:case $.coral.keyCode.SPACE:this._activate(a);break;case $.coral.keyCode.ESCAPE:this.collapse(a);break;default:f=!1,c=this.previousFilter||"",d=String.fromCharCode(a.keyCode),e=!1,clearTimeout(this.filterTimer),d===c?e=!0:d=c+d,b=this._filterMenuItems(d),b=e&&-1!==b.index(this.active.next())?this.active.nextAll(".coral-menu-item"):b,b.length||(d=String.fromCharCode(a.keyCode),b=this._filterMenuItems(d)),b.length?(this.focus(a,b),this.previousFilter=d,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}f&&a.preventDefault()},_activate:function(a){this.active.is(".coral-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(a):this.select(a))},refresh:function(){var a,b,c=this,d=this.options.icons.submenu,e=this.element.find(this.options.menus);this.element.toggleClass("coral-menu-icons",!!this.element.find(".coral-icon").length),e.filter(":not(.coral-menu)").addClass("coral-menu coral-component coral-component-content coral-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var a=$(this),b=a.parent(),c=$("<span>").addClass("coral-menu-icon coral-icon "+d).data("coral-menu-submenu-carat",!0);b.attr("aria-haspopup","true").prepend(c),a.attr("aria-labelledby",b.attr("id"))}),a=e.add(this.element),b=a.find(this.options.items),b.not(".coral-menu-item").each(function(){var a=$(this);c._isDivider(a)&&a.addClass("coral-component-content coral-menu-divider")}),b.not(".coral-menu-item, .coral-menu-divider").addClass("coral-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),b.filter(".coral-state-disabled").attr("aria-disabled","true"),this.active&&!$.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(a,b){"icons"===a&&this.element.find(".coral-menu-icon").removeClass(this.options.icons.submenu).addClass(b.submenu),"disabled"===a&&this.element.toggleClass("coral-state-disabled",!!b).attr("aria-disabled",b),this._super(a,b)},focus:function(a,b){var c,d;this.blur(a,a&&"focus"===a.type),this._scrollIntoView(b),this.active=b.first(),d=this.active.addClass("coral-state-focus").removeClass("coral-state-active"),this.options.role&&this.element.attr("aria-activedescendant",d.attr("id")),this.active.parent().closest(".coral-menu-item").addClass("coral-state-active"),a&&"keydown"===a.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),c=b.children(".coral-menu"),c.length&&a&&/^mouse/.test(a.type)&&this._startOpening(c),this.activeMenu=b.parent(),this._trigger("onFocus",a,{item:b})},_scrollIntoView:function(a){var b,c,d,e,f,g;this._hasScroll()&&(b=parseFloat($.css(this.activeMenu[0],"borderTopWidth"))||0,c=parseFloat($.css(this.activeMenu[0],"paddingTop"))||0,d=a.offset().top-this.activeMenu.offset().top-b-c,e=this.activeMenu.scrollTop(),f=this.activeMenu.height(),g=a.outerHeight(),0>d?this.activeMenu.scrollTop(e+d):d+g>f&&this.activeMenu.scrollTop(e+d-f+g))},blur:function(a,b){b||clearTimeout(this.timer),this.active&&(this.active.removeClass("coral-state-focus"),this.active=null,this._trigger("onBlur",a,{item:this.active}))},_startOpening:function(a){clearTimeout(this.timer),"true"===a.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(a)},this.delay))},_open:function(a){var b=$.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".coral-menu").not(a.parents(".coral-menu")).hide().attr("aria-hidden","true"),a.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(b)},collapseAll:function(a,b){clearTimeout(this.timer),this.timer=this._delay(function(){var c=b?this.element:$(a&&a.target).closest(this.element.find(".coral-menu"));c.length||(c=this.element),this._close(c),this.blur(a),this.activeMenu=c},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element),a.find(".coral-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".coral-state-active").not(".coral-state-focus").removeClass("coral-state-active")},_closeOnDocumentClick:function(a){return!$(a.target).closest(".coral-menu").length},_isDivider:function(a){return!/[^\-\u2014\u2013\s]/.test(a.text())},collapse:function(a){var b=this.active&&this.active.parent().closest(".coral-menu-item",this.element);b&&b.length&&(this._close(),this.focus(a,b))},expand:function(a){var b=this.active&&this.active.children(".coral-menu ").find(this.options.items).first();b&&b.length&&(this._open(b.parent()),this._delay(function(){this.focus(a,b)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".coral-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".coral-menu-item").length},_move:function(a,b,c){var d;this.active&&(d="first"===a||"last"===a?this.active["first"===a?"prevAll":"nextAll"](".coral-menu-item").eq(-1):this.active[a+"All"](".coral-menu-item").eq(0)),d&&d.length&&this.active||(d=this.activeMenu.find(this.options.items)[b]()),this.focus(c,d)},nextPage:function(a){var b,c,d;return this.active?void(this.isLastItem()||(this._hasScroll()?(c=this.active.offset().top,d=this.element.height(),this.active.nextAll(".coral-menu-item").each(function(){return b=$(this),b.offset().top-c-d<0}),this.focus(a,b)):this.focus(a,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))):void this.next(a)},previousPage:function(a){var b,c,d;return this.active?void(this.isFirstItem()||(this._hasScroll()?(c=this.active.offset().top,d=this.element.height(),this.active.prevAll(".coral-menu-item").each(function(){return b=$(this),b.offset().top-c+d>0}),this.focus(a,b)):this.focus(a,this.activeMenu.find(this.options.items).first()))):void this.next(a)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(a){this.active=this.active||$(a.target).closest(".coral-menu-item");var b={item:this.active};this.active.has(".coral-menu").length||this.collapseAll(a,!0),this._trigger("onSelect",a,b)},_filterMenuItems:function(a){var b=a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),c=new RegExp("^"+b,"i");return this.activeMenu.find(this.options.items).filter(".coral-menu-item").filter(function(){return c.test($.trim($(this).text()))})}}),$.component("coral.breadcrumb",{_create:function(){this.element.wrap('<div class="coral-breadcrumb coral-module coral-component coral-component-header coral-helper-clearfix coral-corner-all" role="menu">'),this.element.children("li").each(function(a){var b=$(this);b.attr("role","menuitem");var c=b.children("a");c.addClass("coral-menuitem-link coral-corner-all").contents().wrap('<span class="coral-menuitem-text" />'),a>0?b.before('<li class="coral-breadcrumb-chevron menu-rightArrow cui-icon-arrowDown1"></li>'):c.addClass("coral-icon coral-icon-home")})}}),$.component("coral.tieredmenu",$.coral.basemenu,{options:{autoDisplay:!0},_create:function(){this._generateULContent(),this.element.wrap('<div class="coral-tieredmenu coral-menu coral-component coral-component-content coral-corner-all coral-helper-clearfix" />'),this._render(),this.links=this.element.find(".coral-menuitem-link"),this.lis=this.element.find(".coral-menuitem"),this.menuitems=this.element.children("li.coral-menuitem"),this._bindEvents(),this._super()},_render:function(){var a=this;this.element.addClass("coral-menu-list coral-helper-reset"),this.element.find("li").each(function(b){var c=$(this),d=c.children("a"),e=d.data("icon");a._setMenuItemLinkDisabled(d),a._setMenuItemIsOpen(c,d),a.setMenuItemIsactive(d),d.addClass("coral-menuitem-link coral-corner-all").contents().wrap('<span class="coral-menuitem-text" />'),e&&d.prepend('<span class="menu-icon '+e+'"></span>'),c.addClass("coral-menuitem coral-component coral-corner-all"),c.children("ul").length>0&&(c.addClass("coral-menu-parent"),c.children("ul").addClass("coral-component-content coral-menu-list coral-corner-all coral-helper-clearfix coral-menu-child coral-shadow"),d.prepend('<span class="menu-rightArrow cui-icon-arrowDown1"></span>'))})},_bindEvents:function(){this._bindItemEvents(),this._bindDocumentHandler()},_bindMenuItemClick:function(a,b){a._on({"click.coral-menuitem-link":function(c){var d=$(c.target).closest("a");if(a.options.disabled!==!0&&!d.hasClass("coral-state-disabled")&&("boolean"!=typeof b||b||!d.parent().parent().hasClass("ctrl-init"))){var e={},f=d.closest("li").hasClass("coral-menu-parent");null!=d.parent("li").attr("data-id")&&(e.id=d.parent("li").attr("data-id")),d.parent("li").attr("data-path")&&(e.path=d.parent("li").attr("data-path")),null!=d.attr("data-target")&&(e.target=d.attr("data-target")),null!=d.attr("data-name")&&(e.name=d.attr("data-name")),null!=d.attr("data-url")&&(e.url=d.attr("data-url")),d.find(":checkbox,:radio").length>0?(e.hasChk=!0,e.checked=d.find(":checkbox,:radio").prop("checked")):e.hasChk=!1;var g={target:c.target,currentTarget:a,preventDefault:$.noop};e.isParent=f,e.target=c.target,a._trigger("onClick",g,e)}}})},_bindItemEvents:function(){var a=this;this._on({"mouseenter.coral-menuitem-link":function(a){var b=a.target;if(!(this.options.vertical||$(window).width()<900||this.options.disabled===!0||$(b).hasClass("coral-state-disabled"))){var c=$(b),d=c.parent(),e=this.options.autoDisplay,f=d.siblings("li").children(".coral-state-hover");1===f.length&&this._deactivate(f),e||this.active?this._activate(d):this._highlight(d)}}}),this._on({"mouseleave.coral-menuitem":function(a){var b=$(a.target).closest("li");this.options.vertical||$(window).width()<900||this.options.disabled===!0||$(a.target).closest("a").hasClass("coral-state-disabled")||($(b).find("ul").hide(),$(b).children("a").removeClass("coral-state-hover"))},mouseleave:function(a){this.options.vertical||!this.options.autoDisplay||$(window).width()<900||(this.element.find("ul").hide(),this.element.find(".coral-state-hover").removeClass("coral-state-hover"))},"click.coral-menuitem":function(b){var c=$(b.target).closest("li");this.options.disabled===!0||$(c).find(">a").hasClass("coral-state-disabled")||(!this.options.vertical&&$(window).width()>900&&0==c.find("li").length&&(c.hasClass("coral-menuitem-active")||(a.element.find(".coral-menuitem-active").removeClass("coral-menuitem-active"),c.addClass("coral-menuitem-active"),c.parents("li").addClass("coral-menuitem-active"))),!this.options.vertical&&$(window).width()>900||(c.find("li").length?c.hasClass("coral-menuitem-open")?(c.children("ul").css({display:"none"}),c.removeClass("coral-menuitem-open")):(this.options.singleOpen&&(this.element.find(".coral-menu-child").css({display:"none"}),this.element.find(".coral-menuitem-open").removeClass("coral-menuitem-open"),c.parents(".coral-menu-child").css({display:"block"}),c.parents(".coral-menu-child").closest("li").addClass("coral-menuitem-open")),c.children("ul").css({display:"block"}),c.addClass("coral-menuitem-open")):c.hasClass("coral-menuitem-active")||(a.element.find(".coral-menuitem-active").removeClass("coral-menuitem-active"),c.addClass("coral-menuitem-active"),c.parents("li").addClass("coral-menuitem-active")),b.stopPropagation()))}}),this.options.autoDisplay===!1?(this.rootLinks=this.element.find("> .coral-menuitem > .coral-menuitem-link"),this.rootLinks.data("primecoral-tieredmenu-rootlink",this.options.id).find("*").data("primecoral-tieredmenu-rootlink",this.options.id),this._on(this.rootLinks,{click:function(b){var c=$(b.target).closest("a");if(a.options.disabled!==!0&&!c.hasClass("coral-state-disabled")){var d=c.parent(),e=d.children("ul.coral-menu-child");1===e.length&&(e.is(":visible")?(a.active=!1,a._deactivate(d)):(a.active=!0,a._highlight(d),a._showSubmenu(d,e)));var f={};null!=c.parent("li").attr("data-id")&&(f.id=c.parent("li").attr("data-id")),null!=c.attr("data-target")&&(f.target=c.attr("data-target")),null!=c.attr("data-name")&&(f.name=c.attr("data-name")),null!=c.attr("data-url")&&(f.url=c.attr("data-url")),c.find(":checkbox,:radio").length>0?(f.hasChk=!0,f.checked=c.find(":checkbox,:radio").prop("checked")):f.hasChk=!1;var g={target:a,currentTarget:a,preventDefault:$.noop};a._trigger("onClick",g,f),c.parent("li").hasClass("coral-menu-parent")||a.hide()}}}),this._bindMenuItemClick(a,!1)):this._bindMenuItemClick(a,!0),this._on(this.element.parent().find("ul.coral-menu-list"),{mouseleave:function(b){a.activeitem&&a._deactivate(a.activeitem),a.element.parent().hasClass("coral-menubar-horizontal")||b.stopPropagation()}})},add:function(a,b){if(("string"==typeof a||"number"==typeof a||null===a)&&"object"==typeof b){"string"==typeof a||null==a?this._addByParentId(a,b):"number"==typeof a&&this._addByIndex(a,b)}},_addByParentId:function(a,b){var c=this.element.find(".coral-menuitem").filter("[data-id$='"+a+"']");if(c.length||null===a)if(null===a){this.element.append(this._getAddHTML(b,!1));var d=this._renderAddHTML();this._bindAddItemEvents(d),this._bindLinkRootEvents($(d[0]))}else{this._hasChildren(c)?c.children("ul").append(this._getAddHTML(b,!1)):c.append(this._getAddHTML(b,!0));var e=this._renderAddHTML(c);this._bindAddItemEvents(e)}},_getAddHTML:function(a,b){var c="",d=this.options.simpleDataIdKey;a instanceof Array||(a=[a]),"boolean"==typeof b&&b&&(c+="<ul>");for(var e=0;e<a.length;e++){c+=""!=a[e][d]?'<li data-id="'+a[e][d]+'">':"<li>",c+=this._generateANode(a[e]);var f=a[e].items;f.length>0&&(c=this._generateHTML(c,f)),c+="</li>"}return"boolean"==typeof b&&b&&(c+="</ul>"),c},_renderAddHTML:function(a){var b=this,c=this.element.find("li").not(".coral-menuitem");return a&&!a.children("ul").hasClass("coral-menu-list")&&(a.addClass("coral-menu-parent"),a.children("ul").addClass("coral-component-content coral-menu-list coral-corner-all coral-helper-clearfix coral-menu-child coral-shadow"),a.children("a").prepend('<span class="menu-rightArrow cui-icon-arrowDown1"></span>')),c.each(function(){var a=$(this),c=a.children("a"),d=c.data("icon");b._setMenuItemLinkDisabled(c),c.addClass("coral-menuitem-link coral-corner-all").contents().wrap('<span class="coral-menuitem-text" />'),d&&c.prepend('<span class="menu-icon '+d+'"></span>'),a.addClass("coral-menuitem coral-component coral-corner-all"),a.children("ul").length>0&&(a.addClass("coral-menu-parent"),a.children("ul").addClass("coral-component-content coral-menu-list coral-corner-all coral-helper-clearfix coral-menu-child coral-shadow"),c.prepend('<span class="menu-rightArrow cui-icon-arrowDown1"></span>'))}),c.find(".coral-menuitem-link")},_bindLinkRootEvents:function(a){var b=this;a.data("primecoral-tieredmenu-rootlink",this.options.id).find("*").data("primecoral-tieredmenu-rootlink",this.options.id),this._on(a,{click:function(a){var c=$(a.target).closest("a");if(b.options.disabled!==!0&&!c.hasClass("coral-state-disabled")){var d=c.parent(),e=d.children("ul.coral-menu-child");1===e.length&&(e.is(":visible")?(b.active=!1,b._deactivate(d)):(b.active=!0,b._highlight(d),b._showSubmenu(d,e)))}}})},_bindAddItemEvents:function(a){var b=this;this._on(a,{click:function(a){var c={},d=$(a.target).closest("a");if(b.options.disabled!==!0&&!d.hasClass("coral-state-disabled")){null!=d.parent("li").attr("data-id")&&(c.id=d.parent("li").attr("data-id")),null!=d.attr("data-target")&&(c.target=d.attr("data-target")),null!=d.attr("data-name")&&(c.name=d.attr("data-name")),null!=d.attr("data-url")&&(c.url=d.attr("data-url")),d.find(":checkbox,:radio").length>0?(c.hasChk=!0,c.checked=d.find(":checkbox,:radio").prop("checked")):c.hasChk=!1;var e={target:b,currentTarget:b,preventDefault:$.noop};b._trigger("onClick",e,c),b.hide()}}}),a.on("mouseenter",function(){if(b.options.disabled!==!0&&!$(this).hasClass("coral-state-disabled")){var a=$(this),c=a.parent(),d=b.options.autoDisplay,e=c.siblings(".coral-menuitem-active");1===e.length&&b._deactivate(e),d||b.active?c.hasClass("coral-menuitem-active")?b._reactivate(c):b._activate(c):b._highlight(c)}}),a.parents("li").find("ul.coral-menu-list").on("mouseleave.coral-menu",function(a){b.activeitem&&b._deactivate(b.activeitem),a.stopPropagation()})},_hasChildren:function(a){return!!a.hasClass("coral-menu-parent")},_getLength:function(){return this.element.children("li").length},_addByIndex:function(a,b){var c=parseInt(a);if(!(0>c||c>this._getLength())){0==this._getLength()||c==this._getLength()?this.element.append(this._getAddHTML(b,!1)):this.element.children("li:eq("+c+")").before(this._getAddHTML(b,!1));var d=this._renderAddHTML();this._bindAddItemEvents(d),this._bindLinkRootEvents($(d[0]))}},remove:function(){var a=this.element.children("li");a.length&&a.remove()},removeItem:function(a){"string"==typeof a?this._removeById(a):this._removeByIndex(a)},_removeById:function(a){var b=this.element.find(".coral-menuitem").filter("[data-id$='"+a+"']");b.length&&(b.siblings("li").length?b.remove():b.parent("ul").remove())},_removeByIndex:function(a){var b=parseInt(a);if(!(0>b||b>this._getLength()-1)){var c=this.element.children("li.coral-menuitem:eq("+b+")");c.length&&c.remove()}},updateItem:function(a,b){"string"==typeof a?this._updateById(a,b):this._updateByIndex(a,b)},_updateById:function(a,b){var c=this.element.find(".coral-menuitem").filter("[data-id$='"+a+"']");c.length&&c.children(".coral-menuitem-link").children(".coral-menuitem-text").html(b)},_updateByIndex:function(a,b){var c=parseInt(a);if(!(0>c||c>this._getLength()-1)){var d=this.element.children("li.coral-menuitem:eq("+c+")");
d.length&&d.children(".coral-menuitem-link").children(".coral-menuitem-text").html(b)}},_bindDocumentHandler:function(){var a=this;$(document.body).on("click.coral-menu",function(b){var c=$(b.target);c.data("primecoral-tieredmenu-rootlink")!==a.options.id&&(a.active=!1,0!=c.closest("li").find("ul").length||a.element.parent().hasClass("coral-menubar-vertical")||a.element.find("li.coral-menuitem-active").each(function(){a._deactivate($(this),!0)}))})},enable:function(){var a=this.element.find(".coral-menuitem");a.length&&a.children(".coral-menuitem-link").toggleClass(this.componentFullName+"-disabled coral-state-disabled",!1).attr("aria-disabled",!1)},enableItem:function(a){"string"==typeof a?this._enableItemById(a):this._enableItemByIndex(a)},_enableItemById:function(a){var b=this.element.find(".coral-menuitem").filter("[data-id$='"+a+"']");b.length&&b.children(".coral-menuitem-link").toggleClass(this.componentFullName+"-disabled coral-state-disabled",!1).attr("aria-disabled",!1)},_enableItemByIndex:function(a){var b=parseInt(a);if(!(0>b||b>this._getLength()-1)){var c=this.element.children("li.coral-menuitem:eq("+b+")");c.length&&c.children(".coral-menuitem-link").toggleClass(this.componentFullName+"-disabled coral-state-disabled",!1).attr("aria-disabled",!1)}},disable:function(){var a=this.element.find(".coral-menuitem");a.length&&a.children(".coral-menuitem-link").toggleClass(this.componentFullName+"-disabled coral-state-disabled",!0).attr("aria-disabled",!0)},disableItem:function(a){return"string"==typeof a?this._disableItemById(a):this._disableItemByIndex(a)},_disableItemById:function(a){var b=this.element.find(".coral-menuitem").filter("[data-id$='"+a+"']");b.length&&b.children(".coral-menuitem-link").toggleClass(this.componentFullName+"-disabled coral-state-disabled",!0).attr("aria-disabled",!0)},_disableItemByIndex:function(a){var b=parseInt(a);if(!(0>b||b>this._getLength()-1)){var c=this.element.children("li.coral-menuitem:eq("+b+")");c.length&&c.children(".coral-menuitem-link").toggleClass(this.componentFullName+"-disabled coral-state-disabled",!0).attr("aria-disabled",!0)}},hideAll:function(){var a=this.element.children("li");a.length&&a.hide()},hideItem:function(a){var b=this;return"string"==typeof a?b._hideById(a):b._hideByIndex(a)},_hideById:function(a){var b=this.element.find(".coral-menuitem").filter("[data-id$='"+a+"']");b.length&&b.toggleClass("coral-tieredmenu-hidden",!0)},_hideByIndex:function(a){var b=parseInt(a);if(!(0>b||b>this._getLength()-1)){var c=this.element.children("li.coral-menuitem:eq("+b+")");c.length&&c.toggleClass("coral-tieredmenu-hidden",!0)}},showAll:function(){var a=this.element.children("li");a.length&&a.show()},showItem:function(a){var b=this;return"string"==typeof a?b._showById(a):b._showByIndex(a)},_showById:function(a){var b=this.element.find(".coral-menuitem").filter("[data-id$='"+a+"']");b.length&&b.toggleClass("coral-tieredmenu-hidden",!1)},_showByIndex:function(a){var b=parseInt(a);if(!(0>b||b>this._getLength()-1)){var c=this.element.children("li.coral-menuitem:eq("+b+")");c.length&&c.toggleClass("coral-tieredmenu-hidden",!1)}},_deactivate:function(a,b){this.activeitem=null,a.children("a.coral-menuitem-link").removeClass("coral-state-hover"),b?a.children("ul.coral-menu-child:visible").fadeOut("fast"):a.children("ul.coral-menu-child:visible").hide()},_activate:function(a){this._highlight(a);var b=a.children("ul.coral-menu-child");1===b.length&&this._showSubmenu(a,b)},_reactivate:function(a){this.activeitem=a;var b=a.children("ul.coral-menu-child"),c=b.children("li.coral-menuitem-active:first"),d=this;1===c.length&&d._deactivate(c)},_highlight:function(a){this.activeitem=a,a.children("a.coral-menuitem-link").addClass("coral-state-hover")},_showSubmenu:function(a,b){b.children("li:not(.coral-tieredmenu-hidden)").length&&this.options.disabled!==!0&&(b.css({left:a.outerWidth(),top:0,"z-index":++$.coral.zindex}),b.show())}}),$.component("coral.menubar",$.coral.tieredmenu,{options:{},component:function(){return this.element.parent()},_create:function(){this._super(),this.options.vertical?this.options.vertical&&this.element.parent().addClass("coral-menubar-vertical").removeClass("coral-tieredmenu"):this.element.parent().removeClass("coral-tieredmenu").addClass("coral-menubar").addClass("coral-menubar-horizontal"),this.element.find(">li>ul").addClass("coral-dropdown-menu"),this.options.responsive&&this.component().addClass("menu-responsive"),this.options.minmenu&&this.component().addClass("coral-menu-min"),this.options.collapseButton&&$("<div class='coral-menubar-toggle coral-menubar-collapse'><a href='javascript:void(0)' class='coral-menubar-collapseButton "+this.options.collapseIcon+"'></a></div>").insertAfter(this.element);var a=this;if(this.component().find(".coral-menubar-collapseButton").click(function(){$(this).hasClass(a.options.collapseIcon)?($(this).removeClass(a.options.collapseIcon).addClass(a.options.expandIcon),$(this).parents(".coral-menu").removeClass("coral-menu-min").addClass("coral-menu-min")):$(this).hasClass(a.options.expandIcon)&&($(this).removeClass(a.options.expandIcon).addClass(a.options.collapseIcon),$(this).parents(".coral-menu").removeClass("coral-menu-min"))}),this.options.firstIsactive){var b=this.element.find("li");b=b.filter(function(a){return!$(b[a]).hasClass("coral-menu-parent")});var c=$(b.get(0)).children("a");c.data("isactive",!0),this.setMenuItemIsactive(c)}if(this.options.openFirst){var b=this.element.find("li:first"),c=b.children("a");c.next("ul.coral-menu-child").css({display:"block"})}},_setOption:function(a,b){this._super(a,b),"minmenu"==a&&(b?this.component().removeClass("coral-menu-min").addClass("coral-menu-min"):b||this.component().removeClass("coral-menu-min"))},_showSubmenu:function(a,b){var c=$(window),d=null,e={"z-index":++$.coral.zindex};a.parent().hasClass("coral-menu-child")?(e.left=a.outerWidth(),e.top=0,d=a.offset().top-c.scrollTop()):(e.left=0,a.parent().parent().hasClass("coral-menu-min")?e.top=a.outerHeight()+37:e.top=a.outerHeight(),d=a.offset().top+e.top-c.scrollTop()),b.css("height","auto"),d+b.outerHeight()>c.height()&&(e.overflow="auto",e.height=c.height()-(d+20)),b.css(e).show()}}),$.component("coral.slidemenu",$.coral.basemenu,{_create:function(){this._generateULContent(),this._render(),this.rootList=this.element,this.content=this.element.parent(),this.wrapper=this.content.parent(),this.container=this.wrapper.parent(),this.submenus=this.container.find("ul.coral-menu-list"),this.links=this.element.find("a.coral-menuitem-link:not(.coral-state-disabled)"),this.backward=this.wrapper.children("div.coral-slidemenu-backward"),this.stack=[],this.jqWidth=this.container.width();this.element.hasClass("coral-menu-dynamic")||this._applyDimensions(),this._super(),this._bindEvents()},_render:function(){var a=this;this.element.addClass("coral-menu-list coral-helper-reset").wrap('<div class="coral-menu coral-slidemenu coral-component coral-component-content coral-corner-all coral-helper-clearfix"/>').wrap('<div class="coral-slidemenu-wrapper" />').after('<div class="coral-slidemenu-backward coral-component-header coral-corner-all coral-helper-clearfix">\n                    <span class="coral-icon coral-icon-triangle-1-w"></span>Back</div>').wrap('<div class="coral-slidemenu-content" />'),this.element.parent().uniqueId(),this.options.id=this.element.parent().attr("id"),this.element.find("li").each(function(){var b=$(this),c=b.children("a"),d=c.data("icon");a._setMenuItemLinkDisabled(c),c.addClass("coral-menuitem-link coral-corner-all").contents().wrap('<span class="coral-menuitem-text" />'),d&&c.prepend('<span class="menu-icon '+d+'"></span>'),b.addClass("coral-menuitem coral-component coral-corner-all"),b.children("ul").length>0&&(b.addClass("coral-menu-parent"),b.children("ul").addClass("coral-component-content coral-menu-list coral-corner-all coral-helper-clearfix coral-menu-child coral-shadow"),c.prepend('<span class="menu-rightArrow cui-icon-arrowDown1"></span>'))})},_bindEvents:function(){var a=this;this._bindMenuItemClick(a),this.links.on("mouseenter.coral-menu",function(){$(this).addClass("coral-state-hover")}).on("mouseleave.coral-menu",function(){$(this).removeClass("coral-state-hover")}).on("click.coral-menu",function(){var b=$(this),c=b.next();1==c.length&&a._forward(c)}),this.backward.on("click.coral-menu",function(){a._back()})},_forward:function(a){var b=this;this._push(a);var c=-1*(this._depth()*this.jqWidth);a.show().css({left:this.jqWidth}),this.rootList.animate({left:c},300,"easeInOutCirc",function(){b.backward.is(":hidden")&&b.backward.fadeIn("fast")})},_back:function(){var a=this,b=this._pop(),c=this._depth(),d=-1*(c*this.jqWidth);this.rootList.animate({left:d},300,"easeInOutCirc",function(){b.hide(),0===c&&a.backward.fadeOut("fast")})},_push:function(a){this.stack.push(a)},_pop:function(){return this.stack.pop()},_last:function(){return this.stack[this.stack.length-1]},_depth:function(){return this.stack.length},_applyDimensions:function(){this.submenus.width(this.container.width()),this.wrapper.height(this.rootList.outerHeight(!0)+this.backward.outerHeight(!0)),this.content.height(this.rootList.outerHeight(!0)),this.rendered=!0},show:function(){this.align(),this.container.css("z-index",++$.coral.zindex).show(),this.rendered||this._applyDimensions()}}),$.component("coral.contextmenu",$.coral.tieredmenu,{options:{autoDisplay:!0,target:null,event:"contextmenu"},_create:function(){this._super(),this.element.parent().removeClass("coral-tieredmenu").addClass("coral-contextmenu coral-menu-dynamic coral-shadow coral-contextmenu");var a=this;this.options.target="string"==typeof this.options.target?$("#"+this.options.target):this.options.target,this.options.target=this.options.target||$(document),this.element.parent().parent().is(document.body)||this.element.parent().appendTo("body"),this.options.target.on(this.options.event+".coral-contextmenu",function(b){a.show(b)})},_bindItemEvents:function(){this._super();var a=this;this.links.bind("click",function(){return $(this).parent().hasClass("coral-menu-parent")?!1:void a._hide()})},_bindDocumentHandler:function(){var a=this;$(document.body).bind("click.coral-contextmenu",function(b){a.element.parent().is(":hidden")||a._hide()})},show:function(a){if(this.options.disabled===!0)return a.preventDefault(),void a.stopPropagation();$(document.body).children(".coral-contextmenu:visible").hide();var b=$(window),c=a.pageX,d=a.pageY,e=this.element.parent().outerWidth(),f=this.element.parent().outerHeight();c+e>b.width()+b.scrollLeft()&&(c-=e),d+f>b.height()+b.scrollTop()&&(d-=f),this.options.beforeShow&&this.options.beforeShow.call(this),this.element.parent().css({left:c,top:d,"z-index":++$.coral.zindex}).show(),a.preventDefault(),a.stopPropagation()},_hide:function(){var a=this;this.element.parent().find("li.coral-menuitem-active").each(function(){a._deactivate($(this),!0)}),this.element.parent().fadeOut("fast")},isVisible:function(){return this.element.parent().is(":visible")},getTarget:function(){return this.jqTarget}}),$.component("coral.navigatemenubase",$.coral.basemenu,{options:{autoDisplay:!0},_create:function(){this._generateULContent(),this._render(),this.links=this.element.find(".coral-menuitem-link:not(.coral-state-disabled)"),this._bindEvents(),this._super()},_render:function(){var a=this;this.element.addClass("coral-menu-list coral-helper-reset").wrap('<div class="coral-tieredmenu coral-menu coral-component coral-component-content coral-corner-all coral-helper-clearfix" />'),this.element.parent().uniqueId(),this.options.id=this.element.parent().attr("id"),this.element.find("li").each(function(){var b=$(this),c=b.children("a"),d=c.data("icon");a._setMenuItemLinkDisabled(c),c.addClass("coral-menuitem-link coral-corner-all").contents().wrap('<span class="coral-menuitem-text" />'),d&&c.prepend('<span class="menu-icon '+d+'"></span>'),b.addClass("coral-menuitem coral-component coral-corner-all"),b.children("ul").length>0&&(b.addClass("coral-menu-parent"),b.css("position","static"),b.children("ul").css("width","100%"),b.find("ul li").css("width","auto"),b.find("ul li a").css("width","auto"),b.children("ul").addClass("coral-component-content coral-menu-list coral-corner-all coral-helper-clearfix coral-menu-child coral-shadow"),c.prepend('<span class="menu-rightArrow cui-icon-arrowDown1"></span>'))})},_bindEvents:function(){this._bindItemEvents(),this._bindDocumentHandler()},_bindItemEvents:function(){var a=this;this._bindMenuItemClick(a),this.links.on("mouseenter.coral-menu",function(){if(a.options.disabled!==!0){var b=$(this),c=b.parent(),d=a.options.autoDisplay,e=c.siblings(".coral-menuitem-active");1===e.length&&a._deactivate(e),d||a.active?c.hasClass("coral-menuitem-active")?a._reactivate(c):a._activate(c):a._highlight(c)}}),this.options.autoDisplay===!1&&(this.rootLinks=this.element.find("> .coral-menuitem > .coral-menuitem-link"),this.rootLinks.data("primecoral-tieredmenu-rootlink",this.options.id).find("*").data("primecoral-tieredmenu-rootlink",this.options.id),this.rootLinks.on("click.coral-menu",function(b){var c=$(this),d=c.parent(),e=d.children("ul.coral-menu-child");1===e.length&&(e.is(":visible")?(a.active=!1,a._deactivate(d)):(a.active=!0,a._highlight(d),a._showSubmenu(d,e)))})),this.element.parent().find("ul.coral-menu-list").on("mouseleave.coral-menu",function(b){a.activeitem,b.stopPropagation()})},_bindDocumentHandler:function(){var a=this;$(document.body).on("click.coral-menu ",function(b){var c=$(b.target);c.data("primecoral-tieredmenu-rootlink")!==a.options.id&&(c.is("[type='checkbox']")||(a.active=!1,a.element.find("li.coral-menuitem-active").each(function(){"false"===a.options.fixmenu&&a._deactivate($(this),!0)})))})},_deactivate:function(a,b){this.activeitem=null,a.children("a.coral-menuitem-link").removeClass("coral-state-hover"),a.removeClass("coral-menuitem-active"),b?a.children("ul.coral-menu-child:visible").fadeOut("fast"):a.children("ul.coral-menu-child:visible").hide()},_activate:function(a){this._highlight(a);var b=a.children("ul.coral-menu-child");1===b.length&&this._showSubmenu(a,b)},_reactivate:function(a){this.activeitem=a;var b=a.children("ul.coral-menu-child"),c=b.children("li.coral-menuitem-active:first"),d=this;1===c.length&&d._deactivate(c)},_highlight:function(a){this.activeitem=a,a.children("a.coral-menuitem-link").addClass("coral-state-hover"),a.addClass("coral-menuitem-active")},_showSubmenu:function(a,b){this.options.disabled!==!0&&(b.css({left:a.outerWidth(),top:0,"z-index":++$.coral.zindex}),b.show())}}),$.component("coral.navigatemenu",$.coral.navigatemenubase,{options:{autoDisplay:!0,checkable:null,fixmenu:null},_generateHTML:function(a,b){a+="<ul>";for(var c=0;c<b.length;c++){a+="<li>",a+=this._generateANode(b[c]);var d=b[c].name,e=b[c].items;e.length>0&&(a=this._generateLast(a,e,d)),a+="</li>"}return a+="</ul>"},_generateLast:function(a,b,c){a+="<ul>";for(var d=0;d<b.length;d++)a+="<li>",a+=this._generateChbNode(b[d],c),a+="</li>";return a+="</ul>"},_generateChbNode:function(a,b){var c="<a";""!=a.iconclass,""!=a.name&&(c+=" data-name='"+a.name+"'"),""!=a.disabled&&(c+=" data-disabled='"+a.disabled+"'"),""!=a.url&&(c+=" href='"+a.url+"'"),""!=a.target&&(c+=" target='"+a.target+"'"),c+=">";var d=a.checked===!0?"checked":"",e="true"==a.disabled?"disabled=true":"",f="<input type='radio' "+e+" name='"+b+"' "+d+" data-id='"+this.element[0].id+"_"+a.name+"'/>";return this.options.checkable===!0&&(f="<input type='checkbox' "+e+" "+d+" data-id='"+this.element[0].id+"_"+a.name+"'/>"),c+=f,""!=a.name&&(c+=a.name),c+="</a>"},_create:function(){if(this._super(),this.element.parent().removeClass("coral-tieredmenu").addClass("coral-navigatemenu"),"false"!==this.options.fixmenu){var a=$(this.links[0]).parent(":first").find("ul").outerHeight(),b=this.element.parent().outerHeight();this.element.parent().outerHeight(a+b-3)}"false"!==this.options.fixmenu&&(this._activate($(this.links[0]).parent()),$(this.links[0]).parent(":first").find("ul").css("height","auto"))},_showSubmenu:function(a,b){var c=$(window),d=null,e={"z-index":++$.coral.zindex};a.parent().hasClass("coral-menu-child")?(e.left=a.outerWidth(),e.top=0,d=a.offset().top-c.scrollTop()):(e.left=0,e.top=this.element.parent().outerHeight(),d=a.offset().top+e.top-c.scrollTop()),b.css("height","auto"),d+b.outerHeight()>c.height()&&(e.overflow="auto",e.height=c.height()-(d+20)),b.css(e).show()},check:function(a,b){$("[data-id='"+this.element[0].id+"_"+a+"']").prop("checked",b)}});