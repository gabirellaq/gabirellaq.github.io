/*! cui 2016-11-08 */
!function(){var a={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},b={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},c=null;$.component("coral.dialog",{version:"@version",castProperties:["buttons","position"],options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"关闭",closeButtonClass:"cui-icon-cross2",closable:!0,loadtext:"加载中，请耐心等候 ...",maximumText:"最大化",maximizable:!1,maximized:!1,minimizable:!1,minimized:!1,minimizText:"最小化",restoreWidth:200,restoreHeight:200,dialogClass:"",iframePanel:!1,draggable:!0,animateType:null,hide:null,delay:"800",height:"auto",percent:!1,manualResize:!1,maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,zIndex:null,timeOut:0,position:{my:"center",at:"center",of:window,collision:"fit",using:function(a){var b=$(this).css(a).offset().top;0>b&&$(this).css("top",a.top-b)}},resizable:!0,show:null,title:null,subTitle:null,type:null,wtype:"dialog",message:null,width:300,url:"",contentType:"",reLoadOnOpen:!1,postData:[],asyncType:"post",beforeClose:null,onCreate:null,onClose:null,onDrag:null,onDragStart:null,onDragStop:null,onFocus:null,onLoad:null,onLoadError:null,onOpen:null,onResize:null,onResizeStart:null,onResizeStop:null,onConfirm:null,onCancel:null,focusInput:!1},_compatible:function(){this.options.reloadOnOpen=this.options.reLoadOnOpen},_create:function(){this._compatible();var a=[],b=/^(\d|[1-9]\d|100)%$/;b.test(this.options.height)&&(this.options.percent=this.options.height,this.options.height=this._percentToPx()),$.inArray(this.options.wtype,["dialog","message","alert","confirm"])<0&&(this.options.wtype="dialog"),"dialog"!==this.options.wtype&&(this.options.minHeight=null),this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this.originalsubTitle=this.element.attr("subTitle"),this.options.subTitle=this.options.subTitle||this.originalsubTitle,a=["slideTop","slideBottom","slideLeft","slideRight"],$.inArray(this.options.animateType,a)>-1&&(this.animate=!0),this._createWrapper();var c=this.options.isMessage?"alert-box":"coral-dialog-content";switch(this.element.show().removeAttr("title").addClass(c+" coral-component-content").appendTo(this.uiDialog),"dialog"!==this.options.wtype&&this.uiDialog.addClass("coral-messager"),this.options.wtype){case"alert":this._createTitlebar(),this._createButtonPanel();break;case"message":break;case"confirm":this._createTitlebar(),this._createButtonPanel();break;case"dialog":this._createTitlebar(),this._createButtonPanel()}this.options.draggable&&$.fn.draggable&&this._makeDraggable(),this.options.resizable&&$.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var a=this.options.appendTo;return"string"==typeof a&&"parent"==a?this.originalPosition.parent:a&&(a.jquery||a.nodeType)?$(a):this.document.find(a||"body").eq(0)},forceDestroy:function(){this._destroy(!0)},_destroy:function(a){var b,c=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("coral-dialog-content coral-component-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.options.iframePanel&&this.iframePanel.stop(!0,!0).remove(),a||(this.originalTitle&&this.element.attr("title",this.originalTitle),b=c.parent.children().eq(c.index),b.length&&b[0]!==this.element[0]?b.before(this.element):c.parent.append(this.element))},component:function(){return this.uiDialog},disable:$.noop,enable:$.noop,minimize:function(){var a,b,c=this,d=this.originalPosition;this._hide(this.uiDialog,this.options.hide,function(){if(b=d.parent.children().eq(d.index),b.length&&b[0]!==c.element[0]?b.before(c.uiDialog):d.parent.append(c.uiDialog),c._isOpen=!1,c._focusedElement=null,c._destroyOverlay(),c._untrackInstance(),$.inArray(c.options.wtype,["dialog","alert","confirm"])>-1&&c.opener.length&&"object"!=c.opener[0].tagName.toLowerCase()&&!c.opener.filter(":focusable").focus().length)try{a=c.document[0].activeElement,a&&"body"!==a.nodeName.toLowerCase()&&$(a).blur()}catch(e){}"dialog"!==c.options.wtype&&c.element.remove(),c._trigger("onMinimize",event)}),this.options.iframePanel&&this.iframePanel.hide()},close:function(a){var b,c,d=this,e=this.options.hide,f=this.originalPosition;this.animate&&(d.uiDialog.hasClass("in")&&d.uiDialog.removeClass("in"),e=this.options),this.options.reLoadOnOpen&&(this.loaded=!1),this._isOpen&&this._trigger("beforeClose",a)!==!1&&(d.options.destroyOnClose&&d.element.html(""),""!=d.options.url&&d.options.reLoadOnOpen&&d.options.autoDestroy&&d.element.html(""),this._hide(this.uiDialog,e,function(){if(c=f.parent.children().eq(f.index),c.length&&c[0]!==d.element[0]?c.before(d.uiDialog):f.parent.append(d.uiDialog),d._isOpen=!1,d._focusedElement=null,d._destroyOverlay(),d._untrackInstance(),$.inArray(d.options.wtype,["dialog","alert","confirm"])>-1&&d.opener.length&&"object"!=d.opener[0].tagName.toLowerCase()&&!d.opener.filter(":focusable").focus().length)try{b=d.document[0].activeElement,b&&"body"!==b.nodeName.toLowerCase()&&$(b).blur()}catch(e){}"dialog"!==d.options.wtype&&d.element.remove(),d._trigger("onClose",a)}),this.options.iframePanel&&this.iframePanel.hide())},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(a,b){var c=!1,d=this.uiDialog.siblings(".coral-front:visible").map(function(){return+$(this).css("z-index")}).get(),e=Math.max.apply(null,d);return e>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",e+1),this.options.iframePanel&&this.iframePanel.css("z-index",e+1),c=!0),c&&!b&&this._trigger("onFocus",a),c},reload:function(){var a=this,b={panel:a.element},c=this.options.url;c&&($(a.element).loading({position:"overlay",text:"加载中，请耐心等候！"}),a.loaded=!0,$.ajax({url:this.options.url,type:this.options.asyncType,dataType:"html",data:this.options.postData,success:function(c,d,e){$(a.element).loading("hide"),a.element.html(c),$(a.element).loading({text:"渲染中，请耐心等候！",position:"overlay"}),$.parser.parse(a.element),$(a.element).loading("hide"),a._trigger("onLoad",null,b)},error:function(b,c,d){a._trigger("onLoadError",null,[{xhr:b,st:c,err:d}])},beforeSend:function(a,b){}}))},open:function(){function a(){b.close()}var b=this,d={panel:b.element};this.uiDialog.appendTo(this._appendTo());var e=this.options.url&&!b.loaded;return e&&($(b.element).loading({position:"overlay",text:"加载中，请耐心等候！"}),b.loaded=!0,$.ajax({contentType:this.options.contentType,url:this.options.url,type:this.options.asyncType,dataType:"html",data:this.options.postData,success:function(a,c,e){$(b.element).loading("hide"),b.element.html(a),$(b.element).loading({text:"渲染中，请耐心等候！",position:"overlay"}),$.parser.parse(b.element),$(b.element).loading("hide"),b._trigger("onLoad",null,d)},error:function(a,c,d){b._trigger("onLoadError",null,[{xhr:a,st:c,err:d}])},beforeSend:function(a,b){}})),c=null,this._isOpen?void(this._moveToTop()&&$.inArray(b.options.wtype,["dialog","alert","confirm"])>-1&&this._focusTabbable()):(this._isOpen=!0,this.opener=$(this.document[0].activeElement),this._size(),this.animate?setTimeout(function(){b.uiDialog.addClass("in")},0):this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&(this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this.options.iframePanel&&this.overlay.css("z-index",this.iframePanel.css("z-index")-1)),this._show(this.uiDialog,this.options.show,function(){$.inArray(b.options.wtype,["dialog","alert","confirm"])>-1&&b._focusTabbable(),e?$(b.element).loading("refresh"):$.coral.refreshAllComponent(b.element),b.options.iframePanel&&(b.iframePanel.show(),b.iframePanel.css("width",b.uiDialog.outerWidth())),b._trigger("onFocus")}),this._makeFocusTarget(),this._trigger("onOpen"),void(!isNaN(this.options.timeOut)&&this.options.timeOut>0&&(c=setTimeout(a,b.options.timeOut),this.uiDialog.hover(function(){c&&clearTimeout(c)},function(){c=setTimeout(a,b.options.timeOut)}))))},_focusTabbable:function(){var a=this._focusedElement;return this.options.focusInput===!0?void this._focusFirst():(a||(a=this.element.find("[autofocus]")),a.length||(a=this.element.find(":tabbable")),!a.length&&this.uiDialogButtonPane&&(a=this.uiDialogButtonPane.find(":tabbable")),!a.length&&this.uiDialogTitlebarClose&&(a=this.uiDialogTitlebarClose.filter(":tabbable")),a.length||(a=this.uiDialog),void a.eq(0).focus())},_findFields:function(){return $.coral.findComponent(".ctrl-form-element",this.element)},_focusFirst:function(){var a=this._findFields();for(var b in a){var c=a[b];if(c.focus&&1==c.focus())return}},_keepFocus:function(a){function b(){var a=this.document[0].activeElement,b=this.uiDialog[0]===a||$.contains(this.uiDialog[0],a);b||this._focusTabbable()}a.preventDefault(),b.call(this),this._delay(b)},_createWrapper:function(){this.uiDialog=$("<div>").addClass("coral-dialog coral-component coral-component-content coral-corner-all coral-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this.element.parent()),this.animate&&this.uiDialog.addClass(this.options.animateType),this.options.iframePanel&&(this.iframePanel=$("<iframe class='coral-dialog-iframePanel' style='position:absolute;'></iframe>").hide().appendTo(this._appendTo())),this.options.zIndex&&(this.uiDialog.css("z-index",this.options.zIndex),this.options.iframePanel&&this.iframePanel.css("z-index",this.options.zIndex)),this._on(this.uiDialog,{keydown:function(a){if(this.options.closeOnEscape&&!a.isDefaultPrevented()&&a.keyCode&&a.keyCode===$.coral.keyCode.ESCAPE)return a.preventDefault(),void this.close(a);if(a.keyCode===$.coral.keyCode.TAB&&!a.isDefaultPrevented()){var b=this.uiDialog.find(":tabbable"),c=b.filter(":first"),d=b.filter(":last");a.target!==d[0]&&a.target!==this.uiDialog[0]||a.shiftKey?a.target!==c[0]&&a.target!==this.uiDialog[0]||!a.shiftKey||(this._delay(function(){d.focus()}),a.preventDefault()):(this._delay(function(){c.focus()}),a.preventDefault())}},mousedown:function(a){this._moveToTop(a)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var a;this.options;this.uiDialogTitlebar=$("<div>").addClass("coral-dialog-titlebar coral-component-header coral-corner-all coral-helper-clearfix").prependTo(this.uiDialog),this.uiDialogToolbar=$("<div>").addClass("coral-dialog-toolbar coral-corner-all coral-helper-clearfix").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebar,{mousedown:function(a){$(a.target).closest(".coral-dialog-toolbar-close")||$(a.target).closest(".coral-dialog-toolbar-maximum")||this.uiDialog.focus()}}),this.options.minimizable&&(this.uiDialogTitlebarMaximum=$("<button type='button'></button>").button({label:"&nbsp;",icons:{primary:"cui-icon-minus3"},text:!1}).addClass("coral-dialog-toolbar-minimize").appendTo(this.uiDialogToolbar)),this.options.maximizable&&(this.uiDialogTitlebarMaximum=$("<button type='button'></button>").button({label:this.options.maximumText,icons:{primary:"cui-icon-enlarge7"},text:!1}).addClass("coral-dialog-toolbar-maximum").appendTo(this.uiDialogToolbar)),this.options.closable&&(this.uiDialogTitlebarClose=$("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:this.options.closeButtonClass},text:!1}).addClass("coral-dialog-toolbar-close").appendTo(this.uiDialogToolbar)),this._on(this.uiDialogTitlebar,{click:function(a){if($(a.target).closest(".coral-dialog-toolbar-minimize").length&&this.minimize(),$(a.target).closest(".coral-dialog-toolbar-close").length){var b=$(a.target);b.removeClass("coral-state-hover"),a.preventDefault(),this.close(a)}$(a.target).closest(".coral-dialog-toolbar-maximum").length&&(this.uiDialog.hasClass("coral-dialog-maximum")?this.restore():this.maximize(),$.coral.refreshAllComponent(this.element))}}),a=$("<span>").uniqueId().addClass("coral-dialog-title").prependTo(this.uiDialogTitlebar),this._title(a),uiDialogsubTitle=$("<span>").uniqueId().addClass("coral-dialog-subTitle").prependTo(this.uiDialogTitlebar),this._subTitle(uiDialogsubTitle),this.uiDialog.attr({"aria-labelledby":a.attr("id")}),this.options.maximizable&&this.options.maximized&&(this.maximize(),$.coral.refreshAllComponent(this.element))},maximize:function(a){var b=this.options;b.restoreHeight=b.height,b.restoreWidth=b.width,$(this.element).dialog("option","width",$(window).width()),$(this.element).dialog("option","height",$(window).height()),this.uiDialog.addClass("coral-dialog-maximum"),this.uiDialogTitlebarMaximum.find(".cui-icon-enlarge7").removeClass("cui-icon-enlarge7").addClass("cui-icon-shrink7"),this.options.iframePanel&&this.iframePanel.css({width:$(window).width(),height:$(window).height()}),this._trigger("onMaximize",null,{width:$(window).outerWidth(),height:$(window).outerHeight()})},restore:function(){var a=this,b=this.options;$(a.element).dialog("option","width",b.restoreWidth),$(a.element).dialog("option","height",b.restoreHeight),a.uiDialog.removeClass("coral-dialog-maximum"),this.options.iframePanel&&(this.iframePanel.css({width:b.restoreWidth,height:b.restoreHeight}),this.iframePanel.position(b.position)),this._resetMaximizeIcon(),this._trigger("onRestore",null,{width:$(window).outerWidth(),height:$(window).outerHeight()})},_resetMaximizeIcon:function(){this.uiDialogTitlebarMaximum&&this.uiDialogTitlebarMaximum.find(".cui-icon-shrink7").removeClass("cui-icon-shrink7").addClass("cui-icon-enlarge7")},_title:function(a){var b=$.coral.toFunction(this.options.titleFormat);this.options.title||a.html("&#160;"),b?a.html(b.call(this.element,this.options.title)):a.text(this.options.title)},_subTitle:function(a){this.options.subTitle||a.html("&#160;"),a.text(this.options.subTitle)},_createButtonPanel:function(){this.uiDialogButtonPane=$("<div>").addClass("coral-dialog-buttonpane coral-component-content coral-helper-clearfix"),this.uiButtonSet=$("<div>").addClass("coral-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var a=this,b=this.options.buttons;$.noop,$.noop;if(this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),$.isEmptyObject(b)&&(b={}),$.isArray(b)&&!b.length)return void this.uiDialog.removeClass("coral-dialog-buttons");var c=!0;$.each(b,function(b,d){var e,f,g="coral-btn-primary";d=$.isFunction(d)?{click:d,text:b}:d,d=$.extend({type:"button"},d),e=d.click,d.click=function(){e.apply(a.element[0],arguments)},f={icons:d.icons,icons:d.cls,countdown:d.countdown,text:d.showText},d.id&&(f.id=d.id),f=c?$.extend({},f,{cls:g+" "+d.cls}):$.extend({},f,{cls:d.cls}),delete d.icons,delete d.cls,delete d.showText,$("<button></button>",d).button(f).appendTo(a.uiButtonSet),c=!1}),this.uiDialog.addClass("coral-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)},_makeDraggable:function(){function a(a){return{position:a.position,offset:a.offset}}var b=this,c=this.options;this.uiDialog.draggable({cancel:".coral-dialog-content, .coral-dialog-toolbar-close",handle:".coral-dialog-titlebar",containment:"document",start:function(c,d){$(this).addClass("coral-dialog-dragging"),b._blockFrames(),b.options.iframePanel&&b.iframePanel.css(d.position),b._trigger("onDragStart",c,a(d))},drag:function(c,d){b.options.iframePanel&&b.iframePanel.css(d.position),b._trigger("onDrag",c,a(d))},stop:function(d,e){var f=e.offset.left-b.document.scrollLeft(),g=e.offset.top-b.document.scrollTop();c.position={my:"left top",at:"left"+(f>=0?"+":"")+f+" top"+(g>=0?"+":"")+g,of:b.window},$(this).removeClass("coral-dialog-dragging"),b.options.iframePanel&&b.iframePanel.position(c.position),b._unblockFrames(),b._trigger("onDragStop",d,a(e))}})},_makeResizable:function(){function a(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}var b=this,c=this.options,d=c.resizable,e=this.uiDialog.css("position"),f="string"==typeof d?d:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".coral-dialog-content",containment:"document",alsoResize:this.element,maxWidth:c.maxWidth,maxHeight:c.maxHeight,minWidth:c.minWidth,minHeight:this._minHeight(),handles:f,start:function(c,d){$(this).addClass("coral-dialog-resizing"),b.manualResize=!0,b.options.iframePanel&&(b.iframePanel.css(d.position),b.iframePanel.css(d.size)),b._blockFrames(),b._trigger("onResizeStart",c,a(d))},resize:function(c,d){b.options.iframePanel&&(b.iframePanel.css(d.position),b.iframePanel.css(d.size)),$.coral.refreshAllComponent(b.element),b._trigger("onResize",c,a(d))},stop:function(d,e){var f=b.uiDialog.offset(),g=f.left-b.document.scrollLeft(),h=f.top-b.document.scrollTop();c.height=b.uiDialog.height(),c.width=b.uiDialog.width(),c.position={my:"left top",at:"left"+(g>=0?"+":"")+g+" top"+(h>=0?"+":"")+h,of:b.window},$(this).removeClass("coral-dialog-resizing"),b.options.iframePanel&&(b.iframePanel.position(c.position),b.iframePanel.position(e.size)),b._unblockFrames(),b._trigger("onResizeStop",d,a(e))}}).css("position",e)},_trackFocus:function(){this._on(this.component(),{focusin:function(a){this._makeFocusTarget(),this._focusedElement=$(a.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var a=this._trackingInstances(),b=$.inArray(this,a);-1!==b&&a.splice(b,1)},_trackingInstances:function(){var a=this.document.data("coral-dialog-instances");return a||(a=[],this.document.data("coral-dialog-instances",a)),a},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(){var a,b,c=this.options.position,d=[0,0],e=[];c?(("string"==typeof c||"object"==typeof c&&"0"in c)&&(e=c.split?c.split(" "):[c[0],c[1]],1===e.length&&(e[1]=e[0]),$.each(["left","top"],function(a,b){+e[a]===e[a]&&(d[a]=e[a],e[a]=b)}),c={my:e[0]+(d[0]<0?d[0]:"+"+d[0])+" "+e[1]+(d[1]<0?d[1]:"+"+d[1]),at:e.join(" ")}),c=$.extend({},$.coral.dialog.prototype.options.position,c)):c=$.coral.dialog.prototype.options.position,b=this.uiDialog.is(":visible"),b||this.uiDialog.show(),this.options.iframePanel&&(a=this.iframePanel.is(":visible"),a||this.iframePanel.show()),this.options.queue?$("#coral-msgBox").position(c):(this.uiDialog.position(c),this.options.iframePanel&&this.iframePanel.position(c)),b||this.uiDialog.hide(),this.options.iframePanel&&(a||this.iframePanel.hide())},_setOptions:function(c){var d=this,e=!1,f={};$.each(c,function(c,g){d._setOption(c,g),c in a&&(e=!0),c in b&&(f[c]=g)}),e&&!$(d.element).is(":hidden")&&(this._size(),d.animate||this._position()),this.uiDialog.is(":data(coral-resizable)")&&this.uiDialog.resizable("option",f)},_setOption:function(a,b){var c,d,e=this.uiDialog;"dialogClass"===a&&e.removeClass(this.options.dialogClass).addClass(b),"disabled"!==a&&(this._super(a,b),"appendTo"===a&&this.uiDialog.appendTo(this._appendTo()),"buttons"===a&&this._createButtons(),"maximumText"===a&&this.uiDialogTitlebarMaximum.button({label:""+b}),"closeText"===a&&this.uiDialogTitlebarClose.button({label:""+b}),"draggable"===a&&(c=e.is(":data(coral-draggable)"),c&&!b&&(e.draggable("destroy"),this.options.iframePanel&&this.iframePanel.draggable("destroy")),!c&&b&&this._makeDraggable()),"position"===a&&this._position(),"resizable"===a&&(d=e.is(":data(coral-resizable)"),d&&!b&&(e.resizable("destroy"),this.options.iframePanel&&this.iframePanel.resizable("destroy")),d&&"string"==typeof b&&e.resizable("option","handles",b),d||b===!1||this._makeResizable()),"title"===a&&this._title(this.uiDialogTitlebar.find(".coral-dialog-title")),"subTitle"===a&&this._subTitle(this.uiDialogTitlebar.find(".coral-dialog-subTitle")),"width"!==a&&"height"!==a||(this._resetMaximizeIcon(),this.uiDialog.removeClass("coral-dialog-maximum")))},_size:function(){var a,b,c,d=this.options;if(this.element.hide().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),d.minWidth>d.width&&(d.width=d.minWidth),a=this.uiDialog.css({height:"auto",width:d.width}).outerHeight(),this.element.show(),b=Math.max(0,d.minHeight-a),c="number"==typeof d.maxHeight?Math.max(0,d.maxHeight-a):"none","auto"===d.height)this.element.css({minHeight:b,maxHeight:c,height:"auto"});else{var e=/^(\d|[1-9]\d|100)%$/;e.test(this.options.height)?(this.options.percent=this.options.height,this.element.height(Math.max(0,this._percentToPx()-a))):this.element.height(Math.max(0,this.options.height-a))}this.uiDialog.is(":data(coral-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight()),this.options.iframePanel&&this.iframePanel.css({width:this.uiDialog.outerWidth(),height:this.uiDialog.outerHeight()})},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var a=$(this);return $("<div>").css({position:"absolute",width:a.outerWidth(),height:a.outerHeight()}).appendTo(a.parent()).offset(a.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(a){return $(a.target).closest(".coral-dialog").length?!0:!!$(a.target).closest(".coral-datepicker").length},_createOverlay:function(){if(this.options.modal){var a=!0;this._delay(function(){a=!1}),this.document.data("coral-dialog-overlays")||this._on(this.document,{focusin:function(b){if(!a&&!this._allowInteraction(b)){b.preventDefault();var c=this.document.find(".coral-dialog:visible:last .coral-dialog-content").data(this.componentFullName);c&&c._focusTabbable}}}),this.overlay=$("<div>").addClass("coral-component-overlay coral-front").appendTo(this._appendTo()),"parent"==this.options.appendTo?this.overlay.css({position:"relative"}):"body"!=$(this.options.appendTo)[0].tagName.toLowerCase()&&this.overlay.css({position:"relative"}),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("coral-dialog-overlays",(this.document.data("coral-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var a=this.document.data("coral-dialog-overlays")-1;a?this.document.data("coral-dialog-overlays",a):this.document.unbind("focusin").removeData("coral-dialog-overlays"),this.overlay.remove(),this.overlay=null}},buttonPanel:function(){return this.uiButtonSet},hide:function(){this._isOpen=!1,this.component().hide()},_percentToPx:function(){var a=this.options,b=a.percent,c=$(window);return maxHeight=c.height()*parseInt(b.substring(0,b.length-1))/100,maxHeight},refresh:function(){var a=this,b=this.options,c=b.percent,d=/^(\d|[1-9]\d|100)%$/;d.test(c)&&!b.manualResize&&(maxHeight=a._percentToPx(),b.height=maxHeight,setTimeout(function(){$(a.element).dialog("option","height",maxHeight)},0))}})}();