/*! cui 2016-11-08 */
var tooltip=$.component("coral.tooltip",{version:"4.0.1",options:{content:function(){var a=$(this).attr("title")||"";return $("<a>").text(a).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,onClose:null,onOpen:null},_addDescribedBy:function(a,b){var c=(a.attr("aria-describedby")||"").split(/\s+/);c.push(b),a.data("coral-tooltip-id",b).attr("aria-describedby",$.trim(c.join(" ")))},_removeDescribedBy:function(a){var b=a.data("coral-tooltip-id"),c=(a.attr("aria-describedby")||"").split(/\s+/),d=$.inArray(b,c);-1!==d&&c.splice(d,1),a.removeData("coral-tooltip-id"),c=$.trim(c.join(" ")),c?a.attr("aria-describedby",c):a.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable(),this.liveRegion=$("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("coral-helper-hidden-accessible").appendTo(this.document[0].body)},_setOption:function(a,b){var c=this;return"disabled"===a?(this[b?"_disable":"_enable"](),void(this.options[a]=b)):(this._super(a,b),void("content"===a&&$.each(this.tooltips,function(a,b){c._updateContent(b)})))},_disable:function(){var a=this;$.each(this.tooltips,function(b,c){var d=$.Event("blur");d.target=d.currentTarget=c[0],a.close(d,!0)}),this.element.find(this.options.items).addBack().each(function(){var a=$(this);a.is("[title]")&&a.data("coral-tooltip-title",a.attr("title")).removeAttr("title")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var a=$(this);a.data("coral-tooltip-title")&&a.attr("title",a.data("coral-tooltip-title"))})},open:function(a){var b=this,c=$(a?a.target:this.element).closest(this.options.items);c.length&&!c.data("coral-tooltip-id")&&(c.attr("title")&&c.data("coral-tooltip-title",c.attr("title")),c.data("coral-tooltip-open",!0),a&&"mouseover"===a.type&&c.parents().each(function(){var a,c=$(this);c.data("coral-tooltip-open")&&(a=$.Event("blur"),a.target=a.currentTarget=this,b.close(a,!0)),c.attr("title")&&(c.uniqueId(),b.parents[this.id]={element:this,title:c.attr("title")},c.attr("title",""))}),this._updateContent(c,a))},_updateContent:function(a,b){var c,d=this.options.content,e=this,f=b?b.type:null;return"string"==typeof d?this._open(b,a,d):(c=d.call(a[0],function(c){a.data("coral-tooltip-open")&&e._delay(function(){b&&(b.type=f),this._open(b,a,c)})}),void(c&&this._open(b,a,c)))},_open:function(a,b,c){function d(a){i.of=a,e.is(":hidden")||e.position(i)}var e,f,g,h,i=$.extend({},this.options.position);if(c){if(e=this._find(b),e.length)return void e.find(".coral-tooltip-content").html(c);b.is("[title]")&&(a&&"mouseover"===a.type?b.attr("title",""):b.removeAttr("title")),e=this._tooltip(b),this._addDescribedBy(b,e.attr("id")),e.find(".coral-tooltip-content").html(c),this.liveRegion.children().hide(),c.clone?(h=c.clone(),h.removeAttr("id").find("[id]").removeAttr("id")):h=c,$("<div>").html(h).appendTo(this.liveRegion),this.options.track&&a&&/^mouse/.test(a.type)?(this._on(this.document,{mousemove:d}),d(a)):e.position($.extend({of:b},this.options.position)),this.hiding=!1,this.closing=!1,e.hide(),this._show(e,this.options.show),this.options.show&&this.options.show.delay&&(g=this.delayedShow=setInterval(function(){e.is(":visible")&&(d(i.of),clearInterval(g))},$.fx.interval)),this._trigger("onOpen",a,{tooltip:e}),f={keyup:function(a){if(a.keyCode===$.coral.keyCode.ESCAPE){var c=$.Event(a);c.currentTarget=b[0],this.close(c,!0)}}},b[0]!==this.element[0]&&(f.remove=function(){this._removeTooltip(e)}),a&&"mouseover"!==a.type||(f.mouseleave="close"),a&&"focusin"!==a.type||(f.focusout="close"),this._on(!0,b,f)}},close:function(a){var b=this,c=$(a?a.currentTarget:this.element),d=this._find(c);this.closing||(clearInterval(this.delayedShow),c.data("coral-tooltip-title")&&!c.attr("title")&&c.attr("title",c.data("coral-tooltip-title")),this._removeDescribedBy(c),this.hiding=!0,d.stop(!0),this._hide(d,this.options.hide,function(){b._removeTooltip($(this)),this.hiding=!1,this.closing=!1}),c.removeData("coral-tooltip-open"),this._off(c,"mouseleave focusout keyup"),c[0]!==this.element[0]&&this._off(c,"remove"),this._off(this.document,"mousemove"),a&&"mouseleave"===a.type&&$.each(this.parents,function(a,c){$(c.element).attr("title",c.title),delete b.parents[a]}),this.closing=!0,this._trigger("onClose",a,{tooltip:d}),this.hiding||(this.closing=!1))},_tooltip:function(a){var b=$("<div>").attr("role","tooltip").addClass("coral-tooltip coral-component coral-corner-all coral-component-content "+(this.options.tooltipClass||"")),c=b.uniqueId().attr("id");return $("<div>").addClass("coral-tooltip-content").appendTo(b),b.appendTo(this.document[0].body),this.tooltips[c]=a,b},_find:function(a){var b=a.data("coral-tooltip-id");return b?$("#"+b):$()},_removeTooltip:function(a){a.remove(),delete this.tooltips[a.attr("id")]},_destroy:function(){var a=this;$.each(this.tooltips,function(b,c){var d=$.Event("blur");d.target=d.currentTarget=c[0],a.close(d,!0),$("#"+b).remove(),c.data("coral-tooltip-title")&&(c.attr("title")||c.attr("title",c.data("coral-tooltip-title")),c.removeData("coral-tooltip-title"))}),this.liveRegion.remove()}});