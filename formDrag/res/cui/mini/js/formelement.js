/*! cui 2016-11-08 */
$.component("coral.formelement",{version:"4.0.2",options:{inputLabelGutter:10},getValidateValue:function(){return this.getValue()},clearError:function(){this.component().removeClass("hasErrorIcon coral-validate-error"),this.component().find(".coral-errorIcon").remove(),this.element.prop("isError",!1)},addField:function(){this.element.addClass("ctrl-form-element coral-validation-"+this.componentName);var a=this,b=this.element,c=b.closest(".coral-form-default"),d=c.length>0?$.extend({},$.validate.options,c.form("option")):$.extend({},$.validate.options);if(!(0===b.closest(".coral-form-default").length&&b.closest("form").length>0)){var e=this.options,f=e.required,g=(e.name,e.showStar,e.starBefore,e.validTypeOptions,e.triggers||d.triggers[this.componentName]||$.validate.options.triggers[this.componentName]),h=$.map(g,function(b){return a.componentEventPrefix+b+".field"}).join(" ");b.off(".field").on(h,function(a,b){$.validate.validItem($(this),a,!0)}),b.off(".focuselement").on(a.componentName+"onkeydown.focuselement",function(a,b){var d,e=$.coral.keyCode,f=0,g=c.find(".coral-button");$.each(g,function(a){"submit"==g[a].type&&(d=g[a])});var h,i=c.find(".tabbable"),f=0,j=document.activeElement;if($.each(i,function(a){return h=i[a]===j,f=a,h?!1:void 0}),h&&"TEXTAREA"!=i[f].tagName)if(a.shiftKey)switch(a.keyCode){case e.ENTER:f>0?i[f-1].focus():0==f&&(d?d.focus():i[i.length-1].focus())}else switch(a.keyCode){case e.ENTER:f<i.length-1?i[f+1].focus():f==i.length-1&&(d?d.focus():i[0].focus())}}),"boolean"==typeof f&&f&&$.validate._changeRequiredMark(this.element,f)}},_setOption:function(a,b){var c=this,d=this.options;switch(this._super(a,b),a){case"required":$.validate._changeRequiredMark(c.element,b),c.clearError();break;case"isLabel":case"readonly":case"readonlyInput":c.clearError();break;case"maxlength":$.validate.showTooltip(c.element,d.validTypeOptions)}},_createLabel:function(){var a=this.options.labelPosition||"left",b=this.options.labelField;this._initLabel(a,b)},_initLabel:function(a,b){this.labelPanel=$("<label class='coral-label ' style='width:100px;position:absolute;' data-pos="+a+">"+b+"</label>"),this.labelWraper=this.component(),this.labelWraper.prepend(this.labelPanel),this._positionLabelPanel(a)},_positionLabelPanel:function(a){var b=this.labelPanel.outerWidth();this.component().css("padding-"+a,b),this.labelPanel.css(a,0)}});