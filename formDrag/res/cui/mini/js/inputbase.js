/*! cui 2016-11-08 */
$.component("coral.inputbase",$.coral.formelement,{version:"4.0.2",options:{inputButtonGutter:5},setAtrr:function(){for(var a=["id","name","value","component-role","data-options"],b=0;b<a.length;b++)this.element.attr(a[b])&&this.textboxInput.setAttribute(a[b],this.element.attr(a[b]))},createInput:function(){var a="",b="",c="",d="";1==this.options.hasArrow&&("down"==this.options.showDirection&&(a="<span class='coral-combo-arrow coral-icon-arrow cui-icon-arrow-down3'></span>"),"up"==this.options.showDirection&&(a="<span class='coral-combo-arrow coral-icon-arrow cui-icon-arrow-up3'></span>")),"hidden"!==this.element.attr("type")&&"file"!==this.element.attr("type")&&"password"!==this.element.attr("type")&&"text"!==this.element.attr("type")&&"INPUT"==this.element[0].tagName.toUpperCase()?d="text":(d=this.element.attr("type"),d||(d="text")),this.options.showClose&&!this.options.required&&(b="<span class='coral-input-clearIcon cui-icon-cross2'></span>");var e='<input type="'+d+'" class="'+this.className+'" autocomplete="off"/>';"TEXTAREA"==this.element[0].tagName&&(e="<textarea type='textarea' class='"+this.className+"'/>"+this.element.text()+"</textarea>"),e="<span class='coral-textbox-border coral-corner-all "+this.classBorder+"'>"+e+b+a+"</span>",e+='<input name="'+c+"\" type='hidden'  class=\""+this.hiddenClass+'"/>',this.textboxWrapper=document.createElement("span"),this.textboxWrapper.className=this.compClass,this.textboxWrapper.innerHTML=e,this.elementBorder=this.textboxWrapper.firstChild,this.textboxInput=this.elementBorder.firstChild,this.clearIcon=$(this.textboxInput.nextSibling),this.setAtrr(),this.cloneCopyEvent(this.element[0],this.textboxInput);var f=this.element[0].parentNode;f&&this.textboxWrapper!=this.element[0]&&f.replaceChild(this.textboxWrapper,this.element[0])},cloneCopyEvent:function(a,b){if(1===b.nodeType&&jQuery.hasData(a)){var c,d,e,f=jQuery._data(a),g=jQuery._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)jQuery.event.add(b,c,h[c][d])}g.data&&(g.data=jQuery.extend({},g.data))}},_setOption:function(a,b){var c=this;this._super(a,b),this.component().find(".button").each(function(){var d=$(this).attr("data-pos"),e=d.split("_");if("isLabel"===a)if(b)$(this).hide(),"outer"==e[0]?c.component().css("padding-"+e[1],0):c.component().find(".coral-textbox-border").css("padding-"+e[1],0);else{$(this).show();var f=$(this).outerWidth();"outer"==e[0]?c.component().css("padding-"+e[1],f+c.options.inputButtonGutter):c.component().find(".coral-textbox-border").css("padding-"+e[1],f)}if("readonly"===a||"disable"===a||"isLabel"===a){var g=$(this).find(".ctrl-init-button");b?g.button("disable"):g.button("enable")}})},_outerButtons:function(){this.uiDialogOuterButtonPanel=$("<span class='coral-outerbuttonset coral-outer coral-corner-all'></span>"),this.component().append(this.uiDialogOuterButtonPanel),this._createtoolPanelItems(this.options.buttonOptions,null,this.uiDialogOuterButtonPanel,null,"button"),this.component().css("padding-right",this.uiDialogOuterButtonPanel.outerWidth()+8)},_createButtonPanel:function(){var a,b=!1,c="right",d="inner",e="innerRight",f="prepend",g=this.options.buttons;for(a=0;a<this.options.buttons.length;a++){g[a].innerLeft&&(e="innerLeft",c="left",b=!0),g[a].innerRight&&(e="innerRight",c="right",f="append",b=!0),g[a].outerRight&&(e="outerRight",c="right",d="outer",f="append",b=!0),g[a].outerLeft&&(e="outerLeft",c="left",d="outer",b=!0),g[a].floatRight&&(e="floatRight",d="float",f="append",b=!0),g[a].floatLeft&&(e="floatLeft",c="left",d="float",b=!0);var h=g[a][e]?g[a][e][0]:g[a];h.type&&"combobox"==h.type?this._initToolPanel(d,e,c,f,a,"combobox"):b&&this._initToolPanel(d,e,c,f,a,"button")}b||(this.uiDialogButtonPanel=$("<span class='button "+e+" coral-textbox-btn-icons coral-buttonset coral-corner-"+c+"' data-pos="+d+"_"+c+"></span>"),this._createtoolPanelItems(this.options.buttons,c,this.uiDialogButtonPanel,d,"button"),this.elementBorder.append(this.uiDialogButtonPanel),this.elementBorder.css("padding-right",this.uiDialogButtonPanel.outerWidth()),this.uiDialogButtonPanel.css("right",0),this.rightPos=this.uiDialogButtonPanel.outerWidth())},_initToolPanel:function(a,b,c,d,e,f){"inner"==a?(this.uiButtonPanel=$("<span class='button "+b+" coral-buttonset coral-inner coral-corner-"+c+"' data-pos="+a+"_"+c+"></span>"),this.buttonPanelWraper=this.elementBorder):(this.uiButtonPanel=$("<span class='button "+b+" coral-outerbuttonset coral-outer coral-corner-all' data-pos="+a+"_"+c+"></span>"),this.buttonPanelWraper=this.component()),this.buttonPanelWraper[d](this.uiButtonPanel),this._createtoolPanelItems(this.options.buttons[e][b],c,this.uiButtonPanel,a,f),this._positionToolPanel(a,c)},_positionToolPanel:function(a,b){var c=this.uiButtonPanel.outerWidth()+1;"inner"===a?(this.elementBorder.css("padding-"+b,c),this.uiButtonPanel.css(b,0)):"float"===a?this.uiButtonPanel.css(b,-(c+this.options.inputButtonGutter)):"outer"===a&&(this.component().css("padding-"+b,c+this.options.inputButtonGutter),this.uiButtonPanel.css(b,0)),"left"===b&&this.uiButtonPanel.css("width",c),a+b==="innerright"&&(this.rightPos=this.uiButtonPanel.outerWidth())},_createtoolPanelItems:function(a,b,c,d,e){var f=this;$.isEmptyObject(a)&&(a={}),a instanceof Array==0&&(a=[a]),$.each(a,function(g){var h="",i="coral-corner-all";if("inner"==d&&"left"==b?0==g&&(h="coral-corner-left"):"inner"==d&&"right"==b?g==a.length-1&&(h="coral-corner-right"):i="","button"===e){var j,k=$.extend({type:"button"},{click:this.click});this.click=this.onClick||this.click,delete this.onClick,j=this.click||$.noop,k.click=function(){j.apply(f.element[0],arguments)},delete this.click;var l=$("<button></button>",k).button(this);l.button("component").addClass(h).removeClass(i).appendTo(c),this.click=j}else if("combobox"===e){delete this.type,this.width="item";var m=$("<input type='text'/>").appendTo("body");m.off(".changeLength").on("comboboxonload.changeLength",{target:m},function(a){f.resizeCombo.apply(a.data.target.combobox("instance"))}).on("comboboxonchange.changeLength",{target:m},function(a){f.resizeCombo.apply(a.data.target.combobox("instance"))}).combobox(this),m.combobox("component").addClass(h).removeClass(i).appendTo(c).addClass("coral-DropDownButton")}})},resizeCombo:function(){function a(a,c){var d=b.options.inputButtonGutter,e=0;"outer"===a&&($(".coral-outer").children(".coral-DropDownButton").each(function(){e+=$(this).width()}),b.component().closest(".coral-outer").css("width",e),b.component().closest(".coral-outer").closest(".coral-textbox").css("padding-"+c,e+d)),"inner"===a&&b.component().hasClass("coral-inner-left")&&($(".coral-inner").find(".coral-inner-left").each(function(){e+=$(this).width()}),b.component().closest(".coral-textbox-border").css("padding-left",e))}var b=this;this.options;this.component().closest(".coral-inner").length&&a("inner","left");var c=this.component().closest(".coral-outer");c.length&&("outer_right"==c.attr("data-pos")&&a("outer","right"),"outer_left"==c.attr("data-pos")&&a("outer","left"))}});