/*! cui 2016-11-08 */
$.component("coral.treebutton",$.coral.button,{version:$.coral.version,castProperties:["treeOptions"],options:{id:null,name:null,label:null,cls:null,position:{my:"left top",at:"left bottom",collision:"none"},width:null,text:!0,disabled:!1,multiple:!1,treeOptions:{id:null,name:null,data:null,showLine:!1,showIcon:!1,checkable:!0},onCreate:null,onClick:null,onCheck:null,onSelect:null},tree:function(){return this.uiTree},_create:function(){this._super(),this._initElements()},_initElements:function(){var a=this,b=this.options,c=this.options.treeOptions;this.element.addClass("coral-treebutton-element").uniqueId(),this.uiTree=$("<ul>").attr("id",$(this.element).attr("id")+"_tree").addClass("coral-treebutton-panel coral-front").appendTo("body"),this.element.on("click",function(b,c){a._showtree()}),this._on(this.document,{mousedown:function(b){b.isDefaultPrevented()||a._hidetree()}}),this.uiTree.unbind().bind("mousedown",function(a){a.preventDefault()});var d={checkable:this.options.multiple};c=$.extend({},d,b.treeOptions,{id:$(this.element).attr("id")+"_tree"}),this.uiTree.tree(c)},_bindEvents:function(){},_setOption:function(a,b){this._super(a,b)},_showtree:function(a){var b=this.uiTree;b.show();var c=b.siblings(".coral-front:visible").map(function(){return+$(this).css("z-index")}).get(),d=Math.max.apply(null,c);d>=+b.css("z-index")&&b.css("z-index",d+1),b.position($.extend({of:this.element},this.options.position))},_hidetree:function(){this.uiTree.hide()},disabledNode:function(a){for(var b=this.uiTree.tree("getNodesByParam","id",a),c=0,d=b.length;d>c;c++)this.uiTree.tree("setChkDisabled",b[0],!0)},undisabledNode:function(a){for(var b=this.uiTree.tree("getNodesByParam","id",a),c=0,d=b.length;d>c;c++)this.uiTree.tree("setChkDisabled",b[0],!1)},_destroy:function(){this.uiTree.remove(),this.element.removeClass("ctrl-init ctrl-init-treebutton coral-treebutton-element")}});