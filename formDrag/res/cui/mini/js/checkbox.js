/*! cui 2016-11-08 */
$.component("coral.checkbox",$.coral.formelement,{version:"4.0.1",castProperties:["triggers","showRequiredMark","hideRequiredMark","shortCut"],options:{showStar:!0,id:null,name:null,value:"",label:"",maxLabelWidth:"auto",labelField:null,starBefore:!1,title:"",width:"auto",height:null,disabled:!1,required:!1,readonly:!1,isLabel:!1,checked:!1,errMsg:null,errMsgPosition:"leftBottom",onValidError:null,onKeyDown:null,onValidSuccess:null,onChange:$.noop,triggers:null,excluded:!1},_create:function(){var a=this,b=this.options,c=b.maxLabelWidth,d=b.label;a.originalValue="",a.element.jquery||(a.element=$(a.element)),a.element.addClass("coral-form-element-checkbox tabbable"),a.element.addClass("coral-validation-checkbox"),"undefined"==typeof a.element.attr("id")&&!!a.options.id&&a.element.attr("id",a.options.id),a.options.id=a.element.uniqueId().attr("id");var e=a.element.attr("name");"undefined"!=typeof e?a.options.name=e:a.element.attr("name",a.options.name),""!=$.trim(a.element.val())&&"on"!=$.trim(a.element.val())?a.options.value=a.element.val():a.options.value&&a.element.val(a.options.value),a.options.name&&(a.nameMark="coral-checkbox-element-"+a._hashCode(a.options.name),a.element.addClass(a.nameMark)),a.uiCheckbox=$('<span class="coral-checkbox"></span>'),a.uiLabel=$('<label class="coral-checkbox-label" for=\''+a.options.id+"'></label>"),a.uiIcon=$('<span class="coral-checkbox-icon"></span>'),"auto"==c?a.uiText=$('<span class="coral-checkbox-text"></span>'):a.uiText=$("<span class='coral-checkbox-text'  title='"+d+"' style='max-width:"+c+"px;'></span>"),a.uiLabel.append(a.uiIcon),a.uiLabel.append(this.uiText),a.options.label&&a.uiText.append(a.options.label),a.options.title&&a.uiLabel.attr("title",a.options.title),a.options.checked?(a.uiIcon.addClass("cui-icon-checkbox-checked coral-checkbox-hightlight"),a.element.prop("checked",!0)):(a.uiIcon.addClass("cui-icon-checkbox-unchecked"),a.element.prop("checked",!1)),a.element.after(a.uiCheckbox),a.uiCheckbox.append(a.element).append(a.uiLabel),b.labelField&&(this.uiLabelField=$('<label class="coral-label">'+b.labelField+"</label>"),this.uiCheckbox.prepend(this.uiLabelField),this.uiCheckbox.addClass("coral-hasLabel")),a.element[0].checked===!0&&(a.originalValue=a.options.value),a._bindEvent(),a._trigger("onCreate",null,[])},reset:function(){""===this.originalValue?this.uncheck():this.check()},_getCheckboxs:function(){var a=this,b=a.element.closest("form");return a.nameMark?b.length>0?b.find($("."+a.nameMark)):$("."+a.nameMark):a.element},_setDisabled:function(a){a?(this.element.prop("disabled",!0),this.element.removeClass("tabbable"),this.uiCheckbox.addClass("coral-state-disabled")):(this.element.prop("disabled",!1),this.uiCheckbox.removeClass("coral-state-disabled"),this.element.addClass("tabbable")),this.options.disabled=!!a},_setReadonly:function(a){a?(this.element.prop("readonly",!0),this.uiCheckbox.addClass("coral-readonly"),this.element.removeClass("tabbable")):(this.element.prop("readonly",!1),this.uiCheckbox.removeClass("coral-readonly"),this.element.addClass("tabbable")),this.options.readonly=!!a},_setIsLabel:function(a){a?(this.element.prop("isLabel",!0),this.uiCheckbox.addClass("coral-isLabel"),this.element.removeClass("tabbable")):(this.element.prop("isLabel",!1),this.uiCheckbox.removeClass("coral-isLabel"),this.element.addClass("tabbable")),this.options.isLabel=!!a},focus:function(){return this.options.disabled||this.options.readonly||this.options.isLabel?!1:(this.element.focus(),!0)},_bindEvent:function(){var a=this,b=a.options;this.options.disabled&&this._setDisabled(this.options.disabled),this.element.bind("change",function(b){$(this).prop("checked")?a.uiIcon.removeClass("cui-icon-checkbox-unchecked ").addClass("cui-icon-checkbox-checked coral-checkbox-hightlight"):a.uiIcon.removeClass("cui-icon-checkbox-checked coral-checkbox-hightlight").addClass("cui-icon-checkbox-unchecked"),a._trigger("onChange",b,[{checked:!!a.element.prop("checked")}])}).bind("focus",function(b){a.uiCheckbox.addClass("coral-checkbox-highlight")}).bind("blur",function(){a.uiCheckbox.removeClass("coral-checkbox-highlight")}).bind("keydown"+this.eventNamespace,function(c){b.shortCut&&$.coral.callFunction(b.shortCut,event,this),a._trigger("onKeyDown",c,{})}),this.uiCheckbox.bind("mouseenter"+this.eventNamespace,function(){a.options.disabled||a.uiCheckbox.hasClass("coral-checkbox-highlight")||a.uiCheckbox.hasClass("coral-checkbox-highlight")||$(this).addClass("coral-checkbox-hover")}).bind("mouseleave"+this.eventNamespace,function(){a.options.disabled||$(this).removeClass("coral-checkbox-hover")}),this.uiLabel.bind("click",function(b){return a.options.readonly||a.options.isLabel||a.options.disabled?!1:void a._trigger("onClick",b,{})})},_setOption:function(a,b){if("id"!==a&&"name"!==a){if("readonly"===a&&this._setReadonly(b),"disabled"===a&&this._setDisabled(b),"isLabel"===a&&this._setIsLabel(b),"label"===a&&this.uiText.html(b),"maxLabelWidth"===a){var c=b;"auto"!=b?(c+="px",this.uiText.attr("title",this.options.label)):(c="",this.uiText.attr("title","")),this.uiText.css("max-width",c)}this._super(a,b)}},_destroy:function(){this.uiCheckbox.replaceWith(this.element),this.uncheck(),this.element.removeAttr("value"),this.element.removeClass("coral-form-element-checkbox"),this.element.removeClass("coral-validation-checkbox"),this.element.removeClass(this.nameMark)},_hashCode:function(a){if(!a)return 0;a=""+a;for(var b=0,c=0,d=a.length,e=0;d>e;e++)b=31*b+a.charCodeAt(c++),(b>2147483647||2147483648>b)&&(b=4294967295&b);return b},component:function(){return this.uiCheckbox},disable:function(){this._setDisabled(!0)},readonly:function(){this._setReadonly(!0)},enable:function(){this._setDisabled(!1)},show:function(){this.component().show()},hide:function(){this.component().hide()},check:function(){this.uiIcon.hasClass("coral-checkbox-hightlight")||(this.uiIcon.removeClass("cui-icon-checkbox-unchecked").addClass("cui-icon-checkbox-checked coral-checkbox-hightlight"),this.element.prop("checked",!0))},uncheck:function(){this.uiIcon.hasClass("coral-checkbox-hightlight")&&(this.uiIcon.removeClass("cui-icon-checkbox-checked coral-checkbox-hightlight").addClass("cui-icon-checkbox-unchecked"),this.element.prop("checked",!1))},isChecked:function(){return this.element.prop("checked")},getValue:function(){return this.getValues().join(",")},getValues:function(){var a=this,b=[];return a._getCheckboxs().each(function(){var a=$(this);a.checkbox("isChecked")&&b.push(a.val())}),b},refresh:function(){this._destroy(),this._create()}});